import "./__farm_runtime.8e83bd1e.mjs";import "./index_115a.17196a15.js";import "./index_623f.c52e8e0f.js";import "./index_c29d.5b614914.js";import "./index_fda8.9f67d9a4.js";import * as __farm_external_module_fs from "fs";(globalThis || window || global)['650c7debb79582d1916d16c65fb3085a'].__farm_module_system__.setExternalModules({"fs": {...__farm_external_module_fs,__esModule:true}});(function(_){for(var r in _){_[r].__farm_resource_pot__='index_172f.js';(globalThis || window || global)['650c7debb79582d1916d16c65fb3085a'].__farm_module_system__.register(r,_[r])}})({"953dfae2":function  (e,t,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"run",{enumerable:!0,get:function(){return l;}});let n=r("@swc/helpers/_/_interop_require_default"),c=r("@swc/helpers/_/_interop_require_wildcard")._(r("29bf5eaf")),s=n._(r("fs")),o=r("cfbad0c2");async function l(){try{let e=process.cwd();c.info(`currentDir ${e}`),s.default.mkdirSync(`${e}/dist`),await (0,o.cloneRepo)(),await (0,o.pnpmInstall)(),await (0,o.buildProducts)(),await (0,o.generateViteTemplate)({rootDir:e});}catch(e){e instanceof Error&&c.setFailed(e.message);}}l();},"cfbad0c2":function  (e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var i in t)Object.defineProperty(e,i,{enumerable:!0,get:t[i]});}(t,{buildProducts:function(){return f;},cloneRepo:function(){return u;},generateViteTemplate:function(){return m;},pnpmInstall:function(){return d;}});let r=i("@swc/helpers/_/_interop_require_default"),l=i("@swc/helpers/_/_interop_require_wildcard"),s=l._(i("29bf5eaf")),c=i("6fca8cd7"),p=l._(i("5ba0ffaf")),o=r._(i("fs")),u=async()=>{s.startGroup("clone repo");try{let e=await (0,c.exec)("git",["clone","--depth=1","--single-branch","--branch","develop","https://github.com/Tencent/tdesign-starter-cli","tdesign-starter-cli"]);0!==e&&s.setFailed("clone repo failed"),s.info("clone repo success"),process.chdir("./tdesign-starter-cli");}catch(e){e instanceof Error&&s.setFailed(e.message);}s.endGroup();},d=async()=>{s.startGroup("install pnpm");try{let e=await (0,c.exec)("npm install pnpm -g");0!==e&&s.setFailed("pnpm install failed"),s.info("install pnpm success");}catch(e){e instanceof Error&&s.setFailed(e.message);}s.endGroup();},f=async()=>{s.startGroup("build dist");try{let e=await (0,c.exec)("pnpm install"),t=await (0,c.exec)("pnpm run build");(0!==t||0!==e)&&s.setFailed("build failed"),s.info("build success");}catch(e){e instanceof Error&&s.setFailed(e.message);}s.endGroup();},m=async({rootDir:e})=>{s.startGroup("generate vite template");try{await (0,c.exec)("pnpm run dev init template-vite-vue2 --description 这是一个vite构建的vue2项目 --type vue2 --template lite --buildToolType vite"),await (0,c.exec)("pnpm run dev init template-vite-vue3 --description 这是一个vite构建的vue3项目 --type vue3 --template lite --buildToolType vite"),await (0,c.exec)("pnpm run dev init template-vite-react --description 这是一个vite构建的react项目 --type react --template lite --buildToolType vite"),s.info("vite模版生成成功");let t=await p.create("template-vite-*/vite.config.*"),i=await t.glob();s.info(`files ${i}`),i.map(async t=>{let i=t.match(/template-vite-(.*)\//);if(s.info(JSON.stringify(i)),null===i){s.setFailed("templateName is null");return;}let n=o.default.readFileSync(t,"utf-8").replace("defineConfig({",`defineConfig({
 base: ${i[0]},`);o.default.writeFileSync(t,n),process.chdir(i[0]),(0,c.exec)("pnpm install && pnpm run build"),o.default.renameSync(`${i[0]}dist`,`${e}/dist/${i[0]}`);});let n=o.default.readdirSync(e);s.info(`files ${n}`);}catch(e){e instanceof Error&&s.setFailed(e.message);}s.endGroup();};},});(globalThis || window || global)['650c7debb79582d1916d16c65fb3085a'].__farm_module_system__.setInitialLoadedResources(['index_115a.17196a15.js','index_623f.c52e8e0f.js','index_c29d.5b614914.js','index_fda8.9f67d9a4.js']);(globalThis || window || global)['650c7debb79582d1916d16c65fb3085a'].__farm_module_system__.setDynamicModuleResourcesMap({  });var farmModuleSystem = (globalThis || window || global)['650c7debb79582d1916d16c65fb3085a'].__farm_module_system__;farmModuleSystem.bootstrap();var entry = farmModuleSystem.require("953dfae2");var run=entry.run;export { run };
//# sourceMappingURL=index.js.map