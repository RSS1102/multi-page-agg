import * as __farm_external_module_http from "http";import * as __farm_external_module_https from "https";import * as __farm_external_module_stream from "stream";import * as __farm_external_module_url from "url";import * as __farm_external_module_zlib from "zlib";(globalThis || window || global)['650c7debb79582d1916d16c65fb3085a'].__farm_module_system__.setExternalModules({"http": __farm_external_module_http && __farm_external_module_http.default && !__farm_external_module_http.__esModule ? {...__farm_external_module_http,__esModule:true} : {...__farm_external_module_http},"https": __farm_external_module_https && __farm_external_module_https.default && !__farm_external_module_https.__esModule ? {...__farm_external_module_https,__esModule:true} : {...__farm_external_module_https},"stream": __farm_external_module_stream && __farm_external_module_stream.default && !__farm_external_module_stream.__esModule ? {...__farm_external_module_stream,__esModule:true} : {...__farm_external_module_stream},"url": __farm_external_module_url && __farm_external_module_url.default && !__farm_external_module_url.__esModule ? {...__farm_external_module_url,__esModule:true} : {...__farm_external_module_url},"zlib": __farm_external_module_zlib && __farm_external_module_zlib.default && !__farm_external_module_zlib.__esModule ? {...__farm_external_module_zlib,__esModule:true} : {...__farm_external_module_zlib}});(function(_){for(var r in _){_[r].__farm_resource_pot__='index_d684.js';(globalThis || window || global)['650c7debb79582d1916d16c65fb3085a'].__farm_module_system__.register(r,_[r])}})({"00a691d3":function e(e,f,c,a){"use strict";let b=c("e67ced7e",!0),d=/%[a-fA-F0-9][a-fA-F0-9]/g,A={"%00":"\0","%01":"\x01","%02":"\x02","%03":"\x03","%04":"\x04","%05":"\x05","%06":"\x06","%07":"\x07","%08":"\b","%09":"	","%0a":"\n","%0A":"\n","%0b":"\v","%0B":"\v","%0c":"\f","%0C":"\f","%0d":"\r","%0D":"\r","%0e":"\x0e","%0E":"\x0e","%0f":"\x0f","%0F":"\x0f","%10":"\x10","%11":"\x11","%12":"\x12","%13":"\x13","%14":"\x14","%15":"\x15","%16":"\x16","%17":"\x17","%18":"\x18","%19":"\x19","%1a":"\x1a","%1A":"\x1a","%1b":"\x1b","%1B":"\x1b","%1c":"\x1c","%1C":"\x1c","%1d":"\x1d","%1D":"\x1d","%1e":"\x1e","%1E":"\x1e","%1f":"\x1f","%1F":"\x1f","%20":" ","%21":"!","%22":'"',"%23":"#","%24":"$","%25":"%","%26":"&","%27":"'","%28":"(","%29":")","%2a":"*","%2A":"*","%2b":"+","%2B":"+","%2c":",","%2C":",","%2d":"-","%2D":"-","%2e":".","%2E":".","%2f":"/","%2F":"/","%30":"0","%31":"1","%32":"2","%33":"3","%34":"4","%35":"5","%36":"6","%37":"7","%38":"8","%39":"9","%3a":":","%3A":":","%3b":";","%3B":";","%3c":"<","%3C":"<","%3d":"=","%3D":"=","%3e":">","%3E":">","%3f":"?","%3F":"?","%40":"@","%41":"A","%42":"B","%43":"C","%44":"D","%45":"E","%46":"F","%47":"G","%48":"H","%49":"I","%4a":"J","%4A":"J","%4b":"K","%4B":"K","%4c":"L","%4C":"L","%4d":"M","%4D":"M","%4e":"N","%4E":"N","%4f":"O","%4F":"O","%50":"P","%51":"Q","%52":"R","%53":"S","%54":"T","%55":"U","%56":"V","%57":"W","%58":"X","%59":"Y","%5a":"Z","%5A":"Z","%5b":"[","%5B":"[","%5c":"\\","%5C":"\\","%5d":"]","%5D":"]","%5e":"^","%5E":"^","%5f":"_","%5F":"_","%60":"`","%61":"a","%62":"b","%63":"c","%64":"d","%65":"e","%66":"f","%67":"g","%68":"h","%69":"i","%6a":"j","%6A":"j","%6b":"k","%6B":"k","%6c":"l","%6C":"l","%6d":"m","%6D":"m","%6e":"n","%6E":"n","%6f":"o","%6F":"o","%70":"p","%71":"q","%72":"r","%73":"s","%74":"t","%75":"u","%76":"v","%77":"w","%78":"x","%79":"y","%7a":"z","%7A":"z","%7b":"{","%7B":"{","%7c":"|","%7C":"|","%7d":"}","%7D":"}","%7e":"~","%7E":"~","%7f":"","%7F":"","%80":"","%81":"","%82":"","%83":"","%84":"","%85":"","%86":"","%87":"","%88":"","%89":"","%8a":"","%8A":"","%8b":"","%8B":"","%8c":"","%8C":"","%8d":"","%8D":"","%8e":"","%8E":"","%8f":"","%8F":"","%90":"","%91":"","%92":"","%93":"","%94":"","%95":"","%96":"","%97":"","%98":"","%99":"","%9a":"","%9A":"","%9b":"","%9B":"","%9c":"","%9C":"","%9d":"","%9D":"","%9e":"","%9E":"","%9f":"","%9F":"","%a0":" ","%A0":" ","%a1":"¡","%A1":"¡","%a2":"¢","%A2":"¢","%a3":"£","%A3":"£","%a4":"¤","%A4":"¤","%a5":"¥","%A5":"¥","%a6":"¦","%A6":"¦","%a7":"§","%A7":"§","%a8":"¨","%A8":"¨","%a9":"©","%A9":"©","%aa":"ª","%Aa":"ª","%aA":"ª","%AA":"ª","%ab":"«","%Ab":"«","%aB":"«","%AB":"«","%ac":"¬","%Ac":"¬","%aC":"¬","%AC":"¬","%ad":"­","%Ad":"­","%aD":"­","%AD":"­","%ae":"®","%Ae":"®","%aE":"®","%AE":"®","%af":"¯","%Af":"¯","%aF":"¯","%AF":"¯","%b0":"°","%B0":"°","%b1":"±","%B1":"±","%b2":"²","%B2":"²","%b3":"³","%B3":"³","%b4":"´","%B4":"´","%b5":"µ","%B5":"µ","%b6":"¶","%B6":"¶","%b7":"·","%B7":"·","%b8":"¸","%B8":"¸","%b9":"¹","%B9":"¹","%ba":"º","%Ba":"º","%bA":"º","%BA":"º","%bb":"»","%Bb":"»","%bB":"»","%BB":"»","%bc":"¼","%Bc":"¼","%bC":"¼","%BC":"¼","%bd":"½","%Bd":"½","%bD":"½","%BD":"½","%be":"¾","%Be":"¾","%bE":"¾","%BE":"¾","%bf":"¿","%Bf":"¿","%bF":"¿","%BF":"¿","%c0":"À","%C0":"À","%c1":"Á","%C1":"Á","%c2":"Â","%C2":"Â","%c3":"Ã","%C3":"Ã","%c4":"Ä","%C4":"Ä","%c5":"Å","%C5":"Å","%c6":"Æ","%C6":"Æ","%c7":"Ç","%C7":"Ç","%c8":"È","%C8":"È","%c9":"É","%C9":"É","%ca":"Ê","%Ca":"Ê","%cA":"Ê","%CA":"Ê","%cb":"Ë","%Cb":"Ë","%cB":"Ë","%CB":"Ë","%cc":"Ì","%Cc":"Ì","%cC":"Ì","%CC":"Ì","%cd":"Í","%Cd":"Í","%cD":"Í","%CD":"Í","%ce":"Î","%Ce":"Î","%cE":"Î","%CE":"Î","%cf":"Ï","%Cf":"Ï","%cF":"Ï","%CF":"Ï","%d0":"Ð","%D0":"Ð","%d1":"Ñ","%D1":"Ñ","%d2":"Ò","%D2":"Ò","%d3":"Ó","%D3":"Ó","%d4":"Ô","%D4":"Ô","%d5":"Õ","%D5":"Õ","%d6":"Ö","%D6":"Ö","%d7":"×","%D7":"×","%d8":"Ø","%D8":"Ø","%d9":"Ù","%D9":"Ù","%da":"Ú","%Da":"Ú","%dA":"Ú","%DA":"Ú","%db":"Û","%Db":"Û","%dB":"Û","%DB":"Û","%dc":"Ü","%Dc":"Ü","%dC":"Ü","%DC":"Ü","%dd":"Ý","%Dd":"Ý","%dD":"Ý","%DD":"Ý","%de":"Þ","%De":"Þ","%dE":"Þ","%DE":"Þ","%df":"ß","%Df":"ß","%dF":"ß","%DF":"ß","%e0":"à","%E0":"à","%e1":"á","%E1":"á","%e2":"â","%E2":"â","%e3":"ã","%E3":"ã","%e4":"ä","%E4":"ä","%e5":"å","%E5":"å","%e6":"æ","%E6":"æ","%e7":"ç","%E7":"ç","%e8":"è","%E8":"è","%e9":"é","%E9":"é","%ea":"ê","%Ea":"ê","%eA":"ê","%EA":"ê","%eb":"ë","%Eb":"ë","%eB":"ë","%EB":"ë","%ec":"ì","%Ec":"ì","%eC":"ì","%EC":"ì","%ed":"í","%Ed":"í","%eD":"í","%ED":"í","%ee":"î","%Ee":"î","%eE":"î","%EE":"î","%ef":"ï","%Ef":"ï","%eF":"ï","%EF":"ï","%f0":"ð","%F0":"ð","%f1":"ñ","%F1":"ñ","%f2":"ò","%F2":"ò","%f3":"ó","%F3":"ó","%f4":"ô","%F4":"ô","%f5":"õ","%F5":"õ","%f6":"ö","%F6":"ö","%f7":"÷","%F7":"÷","%f8":"ø","%F8":"ø","%f9":"ù","%F9":"ù","%fa":"ú","%Fa":"ú","%fA":"ú","%FA":"ú","%fb":"û","%Fb":"û","%fB":"û","%FB":"û","%fc":"ü","%Fc":"ü","%fC":"ü","%FC":"ü","%fd":"ý","%Fd":"ý","%fD":"ý","%FD":"ý","%fe":"þ","%Fe":"þ","%fE":"þ","%FE":"þ","%ff":"ÿ","%Ff":"ÿ","%fF":"ÿ","%FF":"ÿ"};function F(e){return A[e];}e.exports=function(e){let f=[],c=0,a="",A=!1,B=!1,C=0,D="",E=e.length;for(var x=0;x<E;++x){let E=e[x];if("\\"===E&&A){if(B)B=!1;else{B=!0;continue;}}else if('"'===E){if(B)B=!1;else{A?(A=!1,c=0):A=!0;continue;}}else{if(B&&A&&(D+="\\"),B=!1,(2===c||3===c)&&"'"===E){2===c?(c=3,a=D.substring(1)):c=1,D="";continue;}if(0===c&&("*"===E||"="===E)&&f.length){c="*"===E?2:1,f[C]=[D,void 0],D="";continue;}if(A||";"!==E){if(!A&&(" "===E||"	"===E))continue;}else{c=0,a?(D.length&&(D=b(D.replace(d,F),"binary",a)),a=""):D.length&&(D=b(D,"binary","utf8")),void 0===f[C]?f[C]=D:f[C][1]=D,D="",++C;continue;}}D+=E;}return a&&D.length?D=b(D.replace(d,F),"binary",a):D&&(D=b(D,"binary","utf8")),void 0===f[C]?D&&(f[C]=D):f[C][1]=D,f;};},"026b7588":function e(e,t,n,r){"use strict";var o,i,a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{u(r.next(e));}catch(e){i(e);}}function d(e){try{u(r.throw(e));}catch(e){i(e);}}function u(e){var t;e.done?o(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t);})).then(a,d);}u((r=r.apply(e,t||[])).next());});};Object.defineProperty(t,"__esModule",{value:!0}),t.parseTwirpPath=t.getRequestData=t.validateRequest=t.getContentType=t.TwirpContentType=void 0;let d=n("4796dc9d",!0);function u(e){let t=e.split("/");return t.length<2?{pkgService:"",method:"",prefix:""}:{method:t[t.length-1],pkgService:t[t.length-2],prefix:t.slice(0,t.length-2).join("/")};}(o=i=t.TwirpContentType||(t.TwirpContentType={}))[o.Protobuf=0]="Protobuf",o[o.JSON=1]="JSON",o[o.Unknown=2]="Unknown",t.getContentType=function(e){switch(e){case"application/protobuf":return i.Protobuf;case"application/json":return i.JSON;default:return i.Unknown;}},t.validateRequest=function(e,t,n){if("POST"!==t.method){let e=`unsupported method ${t.method} (only POST is allowed)`;throw new d.BadRouteError(e,t.method||"",t.url||"");}let r=u(t.url||"");if(r.pkgService!==(e.packageName?e.packageName+".":"")+e.serviceName){let e=`no handler for path ${t.url}`;throw new d.BadRouteError(e,t.method||"",t.url||"");}if(r.prefix!==n){let e=`invalid path prefix ${r.prefix}, expected ${n}, on path ${t.url}`;throw new d.BadRouteError(e,t.method||"",t.url||"");}let o=t.headers["content-type"]||"";if(e.contentType===i.Unknown){let e=`unexpected Content-Type: ${t.headers["content-type"]}`;throw new d.BadRouteError(e,t.method||"",t.url||"");}return Object.assign(Object.assign({},r),{mimeContentType:o,contentType:e.contentType});},t.getRequestData=function(e){return new Promise((t,n)=>{if(e.rawBody instanceof Buffer){t(e.rawBody);return;}let r=[];e.on("data",e=>r.push(e)),e.on("end",()=>a(this,void 0,void 0,function*(){t(Buffer.concat(r));})),e.on("error",t=>{e.aborted?n(new d.TwirpError(d.TwirpErrorCode.DeadlineExceeded,"failed to read request: deadline exceeded")):n(new d.TwirpError(d.TwirpErrorCode.Malformed,t.message).withCause(t));}),e.on("close",()=>{n(new d.TwirpError(d.TwirpErrorCode.Canceled,"failed to read request: context canceled"));});});},t.parseTwirpPath=u;},"0d62cce5":function e(e,t,a,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,a,r){void 0===r&&(r=a),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[a];}});}:function(e,t,a,r){void 0===r&&(r=a),e[r]=t[a];}),c=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t});}:function(e,t){e.default=t;}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.hasOwnProperty.call(e,a)&&n(t,e,a);return c(t,e),t;};Object.defineProperty(t,"__esModule",{value:!0}),t.partialMatch=t.match=t.getSearchPaths=void 0;let o=i(a("c2d81037")),u=a("fc5787b7",!0),f="win32"===process.platform;t.getSearchPaths=function(e){e=e.filter(e=>!e.negate);let t={};for(let a of e)t[f?a.searchPath.toUpperCase():a.searchPath]="candidate";let a=[];for(let r of e){let e=f?r.searchPath.toUpperCase():r.searchPath;if("included"===t[e])continue;let n=!1,c=e,i=o.dirname(c);for(;i!==c;){if(t[i]){n=!0;break;}c=i,i=o.dirname(c);}n||(a.push(r.searchPath),t[e]="included");}return a;},t.match=function(e,t){let a=u.MatchKind.None;for(let r of e)r.negate?a&=~r.match(t):a|=r.match(t);return a;},t.partialMatch=function(e,t){return e.some(e=>!e.negate&&e.partialMatch(t));};},"0ea67bf0":function i(i,t,e,s){"use strict";let h=e("99303b28",!0),r=e("e67ced7e",!0),y=e("43216912",!0),_=/^charset$/i;function n(i,t){let e;let s=t.limits,r=t.parsedConType;this.boy=i,this.fieldSizeLimit=y(s,"fieldSize",1048576),this.fieldNameSizeLimit=y(s,"fieldNameSize",100),this.fieldsLimit=y(s,"fields",1/0);for(var n=0,l=r.length;n<l;++n)if(Array.isArray(r[n])&&_.test(r[n][0])){e=r[n][1].toLowerCase();break;}void 0===e&&(e=t.defCharset||"utf8"),this.decoder=new h,this.charset=e,this._fields=0,this._state="key",this._checkingBytes=!0,this._bytesKey=0,this._bytesVal=0,this._key="",this._val="",this._keyTrunc=!1,this._valTrunc=!1,this._hitLimit=!1;}n.detect=/^application\/x-www-form-urlencoded/i,n.prototype.write=function(i,t){let e,s,h;if(this._fields===this.fieldsLimit)return this.boy.hitFieldsLimit||(this.boy.hitFieldsLimit=!0,this.boy.emit("fieldsLimit")),t();let y=0,_=i.length;for(;y<_;)if("key"===this._state){for(e=s=void 0,h=y;h<_;++h){if(!this._checkingBytes&&++y,61===i[h]){e=h;break;}if(38===i[h]){s=h;break;}if(this._checkingBytes&&this._bytesKey===this.fieldNameSizeLimit){this._hitLimit=!0;break;}this._checkingBytes&&++this._bytesKey;}if(void 0!==e)e>y&&(this._key+=this.decoder.write(i.toString("binary",y,e))),this._state="val",this._hitLimit=!1,this._checkingBytes=!0,this._val="",this._bytesVal=0,this._valTrunc=!1,this.decoder.reset(),y=e+1;else if(void 0!==s){let e;++this._fields;let h=this._keyTrunc;if(e=s>y?this._key+=this.decoder.write(i.toString("binary",y,s)):this._key,this._hitLimit=!1,this._checkingBytes=!0,this._key="",this._bytesKey=0,this._keyTrunc=!1,this.decoder.reset(),e.length&&this.boy.emit("field",r(e,"binary",this.charset),"",h,!1),y=s+1,this._fields===this.fieldsLimit)return t();}else this._hitLimit?(h>y&&(this._key+=this.decoder.write(i.toString("binary",y,h))),y=h,(this._bytesKey=this._key.length)===this.fieldNameSizeLimit&&(this._checkingBytes=!1,this._keyTrunc=!0)):(y<_&&(this._key+=this.decoder.write(i.toString("binary",y))),y=_);}else{for(s=void 0,h=y;h<_;++h){if(!this._checkingBytes&&++y,38===i[h]){s=h;break;}if(this._checkingBytes&&this._bytesVal===this.fieldSizeLimit){this._hitLimit=!0;break;}this._checkingBytes&&++this._bytesVal;}if(void 0!==s){if(++this._fields,s>y&&(this._val+=this.decoder.write(i.toString("binary",y,s))),this.boy.emit("field",r(this._key,"binary",this.charset),r(this._val,"binary",this.charset),this._keyTrunc,this._valTrunc),this._state="key",this._hitLimit=!1,this._checkingBytes=!0,this._key="",this._bytesKey=0,this._keyTrunc=!1,this.decoder.reset(),y=s+1,this._fields===this.fieldsLimit)return t();}else this._hitLimit?(h>y&&(this._val+=this.decoder.write(i.toString("binary",y,h))),y=h,(""===this._val&&0===this.fieldSizeLimit||(this._bytesVal=this._val.length)===this.fieldSizeLimit)&&(this._checkingBytes=!1,this._valTrunc=!0)):(y<_&&(this._val+=this.decoder.write(i.toString("binary",y))),y=_);}t();},n.prototype.end=function(){this.boy._done||("key"===this._state&&this._key.length>0?this.boy.emit("field",r(this._key,"binary",this.charset),"",this._keyTrunc,!1):"val"===this._state&&this.boy.emit("field",r(this._key,"binary",this.charset),r(this._val,"binary",this.charset),this._keyTrunc,this._valTrunc),this.boy._done=!0,this.boy.emit("finish"));},i.exports=n;},"26dfd58a":function t(t,i,s,e){"use strict";let r=globalThis.nodeRequire("node:stream",!0).Writable,h=globalThis.nodeRequire("node:util",!0).inherits,a=s("dc98b0e7",!0),n=s("65608846",!0),_=s("e2c81440",!0),p=Buffer.from("-"),o=Buffer.from("\r\n"),u=function(){};function l(t){if(!(this instanceof l))return new l(t);if(r.call(this,t),!t||!t.headerFirst&&"string"!=typeof t.boundary)throw TypeError("Boundary required");"string"==typeof t.boundary?this.setBoundary(t.boundary):this._bparser=void 0,this._headerFirst=t.headerFirst,this._dashes=0,this._parts=0,this._finished=!1,this._realFinish=!1,this._isPreamble=!0,this._justMatched=!1,this._firstWrite=!0,this._inHeader=!0,this._part=void 0,this._cb=void 0,this._ignoreData=!1,this._partOpts={highWaterMark:t.partHwm},this._pause=!1;let i=this;this._hparser=new _(t),this._hparser.on("header",function(t){i._inHeader=!1,i._part.emit("header",t);});}h(l,r),l.prototype.emit=function(t){if("finish"!==t||this._realFinish)r.prototype.emit.apply(this,arguments);else if(!this._finished){let t=this;process.nextTick(function(){if(t.emit("error",Error("Unexpected end of multipart data")),t._part&&!t._ignoreData){let i=t._isPreamble?"Preamble":"Part";t._part.emit("error",Error(i+" terminated early due to unexpected end of multipart data")),t._part.push(null),process.nextTick(function(){t._realFinish=!0,t.emit("finish"),t._realFinish=!1;});return;}t._realFinish=!0,t.emit("finish"),t._realFinish=!1;});}},l.prototype._write=function(t,i,s){if(!this._hparser&&!this._bparser)return s();if(this._headerFirst&&this._isPreamble){this._part||(this._part=new n(this._partOpts),0!==this.listenerCount("preamble")?this.emit("preamble",this._part):this._ignore());let i=this._hparser.push(t);if(this._inHeader||void 0===i||!(i<t.length))return s();t=t.slice(i);}this._firstWrite&&(this._bparser.push(o),this._firstWrite=!1),this._bparser.push(t),this._pause?this._cb=s:s();},l.prototype.reset=function(){this._part=void 0,this._bparser=void 0,this._hparser=void 0;},l.prototype.setBoundary=function(t){let i=this;this._bparser=new a("\r\n--"+t),this._bparser.on("info",function(t,s,e,r){i._oninfo(t,s,e,r);});},l.prototype._ignore=function(){this._part&&!this._ignoreData&&(this._ignoreData=!0,this._part.on("error",u),this._part.resume());},l.prototype._oninfo=function(t,i,s,e){let r,h;let a=this,_=0;if(!this._part&&this._justMatched&&i){for(;this._dashes<2&&s+_<e;)if(45===i[s+_])++_,++this._dashes;else{this._dashes&&(r=p),this._dashes=0;break;}if(2===this._dashes&&(s+_<e&&0!==this.listenerCount("trailer")&&this.emit("trailer",i.slice(s+_,e)),this.reset(),this._finished=!0,0===a._parts&&(a._realFinish=!0,a.emit("finish"),a._realFinish=!1)),this._dashes)return;}this._justMatched&&(this._justMatched=!1),this._part||(this._part=new n(this._partOpts),this._part._read=function(t){a._unpause();},this._isPreamble&&0!==this.listenerCount("preamble")?this.emit("preamble",this._part):!0!==this._isPreamble&&0!==this.listenerCount("part")?this.emit("part",this._part):this._ignore(),this._isPreamble||(this._inHeader=!0)),i&&s<e&&!this._ignoreData&&(this._isPreamble||!this._inHeader?(r&&this._part.push(r),this._part.push(i.slice(s,e))||(this._pause=!0)):!this._isPreamble&&this._inHeader&&(r&&this._hparser.push(r),h=this._hparser.push(i.slice(s,e)),!this._inHeader&&void 0!==h&&h<e&&this._oninfo(!1,i,s+h,e))),t&&(this._hparser.reset(),this._isPreamble?this._isPreamble=!1:s!==e&&(++this._parts,this._part.on("end",function(){0==--a._parts&&(a._finished?(a._realFinish=!0,a.emit("finish"),a._realFinish=!1):a._unpause());})),this._part.push(null),this._part=void 0,this._ignoreData=!1,this._justMatched=!0,this._dashes=0);},l.prototype._unpause=function(){if(this._pause&&(this._pause=!1,this._cb)){let t=this._cb;this._cb=void 0,t();}},t.exports=l;},"27939508":function t(t,e,n,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n];}});}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n];}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e});}:function(t,e){t.default=e;}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&i(e,t,n);return o(e,t),e;},s=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{c(r.next(t));}catch(t){o(t);}}function s(t){try{c(r.throw(t));}catch(t){o(t);}}function c(t){var e;t.done?i(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e);})).then(a,s);}c((r=r.apply(t,e||[])).next());});},c=this&&this.__asyncValues||function(t){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t="function"==typeof __values?__values(t):t[Symbol.iterator](),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this;},e);function r(n){e[n]=t[n]&&function(e){return new Promise(function(r,i){!function(t,e,n,r){Promise.resolve(r).then(function(e){t({value:e,done:n});},e);}(r,i,(e=t[n](e)).done,e.value);});};}},l=this&&this.__await||function(t){return this instanceof l?(this.v=t,this):new l(t);},h=this&&this.__asyncGenerator||function(t,e,n){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this;},r;function a(t){i[t]&&(r[t]=function(e){return new Promise(function(n,r){o.push([t,e,n,r])>1||s(t,e);});});}function s(t,e){try{var n;(n=i[t](e)).value instanceof l?Promise.resolve(n.value.v).then(c,h):u(o[0][2],n);}catch(t){u(o[0][3],t);}}function c(t){s("next",t);}function h(t){s("throw",t);}function u(t,e){t(e),o.shift(),o.length&&s(o[0][0],o[0][1]);}};Object.defineProperty(e,"__esModule",{value:!0}),e.DefaultGlobber=void 0;let u=a(n("29bf5eaf")),f=a(globalThis.nodeRequire("fs")),p=a(n("48f2c5a4")),d=a(globalThis.nodeRequire("path")),y=a(n("0d62cce5")),m=n("fc5787b7",!0),b=n("44d864d1",!0),v=n("663b16e6",!0),g="win32"===process.platform;class w{constructor(t){this.patterns=[],this.searchPaths=[],this.options=p.getOptions(t);}getSearchPaths(){return this.searchPaths.slice();}glob(){var t,e;return s(this,void 0,void 0,function*(){let n=[];try{for(var r,i=c(this.globGenerator());!(r=yield i.next()).done;){let t=r.value;n.push(t);}}catch(e){t={error:e};}finally{try{r&&!r.done&&(e=i.return)&&(yield e.call(i));}finally{if(t)throw t.error;}}return n;});}globGenerator(){return h(this,arguments,function*(){let t=p.getOptions(this.options),e=[];for(let n of this.patterns)e.push(n),t.implicitDescendants&&(n.trailingSeparator||"**"!==n.segments[n.segments.length-1])&&e.push(new b.Pattern(n.negate,!0,n.segments.concat("**")));let n=[];for(let t of y.getSearchPaths(e)){u.debug(`Search path '${t}'`);try{yield l(f.promises.lstat(t));}catch(t){if("ENOENT"===t.code)continue;throw t;}n.unshift(new v.SearchState(t,1));}let r=[];for(;n.length;){let i=n.pop(),o=y.match(e,i.path),a=!!o||y.partialMatch(e,i.path);if(!o&&!a)continue;let s=yield l(w.stat(i,t,r));if(s){if(s.isDirectory()){if(o&m.MatchKind.Directory&&t.matchDirectories)yield yield l(i.path);else if(!a)continue;let e=i.level+1,r=(yield l(f.promises.readdir(i.path))).map(t=>new v.SearchState(d.join(i.path,t),e));n.push(...r.reverse());}else o&m.MatchKind.File&&(yield yield l(i.path));}}});}static create(t,e){return s(this,void 0,void 0,function*(){let n=new w(e);for(let e of(g&&(t=(t=t.replace(/\r\n/g,"\n")).replace(/\r/g,"\n")),t.split("\n").map(t=>t.trim())))!e||e.startsWith("#")||n.patterns.push(new b.Pattern(e));return n.searchPaths.push(...y.getSearchPaths(n.patterns)),n;});}static stat(t,e,n){return s(this,void 0,void 0,function*(){let r;if(e.followSymbolicLinks)try{r=yield f.promises.stat(t.path);}catch(n){if("ENOENT"===n.code){if(e.omitBrokenSymbolicLinks){u.debug(`Broken symlink '${t.path}'`);return;}throw Error(`No information found for the path '${t.path}'. This may indicate a broken symbolic link.`);}throw n;}else r=yield f.promises.lstat(t.path);if(r.isDirectory()&&e.followSymbolicLinks){let e=yield f.promises.realpath(t.path);for(;n.length>=t.level;)n.pop();if(n.some(t=>t===e)){u.debug(`Symlink cycle detected for path '${t.path}' and realpath '${e}'`);return;}n.push(e);}return r;});}}e.DefaultGlobber=w;},"34aa5a3e":function e(e,t,r,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r];}});}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r];}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t});}:function(e,t){e.default=t;}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&o(t,e,r);return i(t,e),t;},s=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function a(e){try{u(n.next(e));}catch(e){i(e);}}function s(e){try{u(n.throw(e));}catch(e){i(e);}}function u(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t);})).then(a,s);}u((n=n.apply(e,t||[])).next());});};Object.defineProperty(t,"__esModule",{value:!0}),t.FetchRPC=t.wrapErrorResponseToTwirpError=t.NodeHttpRPC=void 0;let u=a(globalThis.nodeRequire("http")),c=a(globalThis.nodeRequire("https")),f=globalThis.nodeRequire("url",!0),p=r("4796dc9d",!0);function l(e){return p.TwirpError.fromObject(JSON.parse(e));}t.NodeHttpRPC=e=>({request(t,r,n,o){let i;return new Promise((a,s)=>{let p=[],d="application/protobuf"===n?Buffer.from(o):JSON.stringify(o),h=new f.URL(e.baseUrl),b="https:"===h.protocol;i=b?c:u;let y="/"!==h.pathname?h.pathname:"";i.request(Object.assign(Object.assign({},e||{}),{method:"POST",protocol:h.protocol,host:h.hostname,port:h.port?h.port:b?443:80,path:`${y}/${t}/${r}`,headers:Object.assign(Object.assign({},e.headers?e.headers:{}),{"Content-Type":n,"Content-Length":"application/protobuf"===n?Buffer.byteLength(d):Buffer.from(d).byteLength})}),e=>{e.on("data",e=>p.push(e)),e.on("end",()=>{let t=Buffer.concat(p);200!=e.statusCode?s(l(t.toString())):"application/json"===n?a(JSON.parse(t.toString())):a(t);}),e.on("error",e=>{s(e);});}).on("error",e=>{s(e);}).end(d);});}}),t.wrapErrorResponseToTwirpError=l,t.FetchRPC=e=>({request(t,r,n,o){return s(this,void 0,void 0,function*(){let i=new Headers(e.headers);i.set("content-type",n);let a=yield fetch(`${e.baseUrl}/${t}/${r}`,Object.assign(Object.assign({},e),{method:"POST",headers:i,body:o instanceof Uint8Array?o:JSON.stringify(o)}));if(200===a.status)return"application/json"===n?yield a.json():new Uint8Array((yield a.arrayBuffer()));throw p.TwirpError.fromObject((yield a.json()));});}});},"43216912":function r(r,i,t,n){"use strict";r.exports=function(r,i,t){if(!r||void 0===r[i]||null===r[i])return t;if("number"!=typeof r[i]||isNaN(r[i]))throw TypeError("Limit "+i+" is not a valid number");return r[i];};},"44d864d1":function t(t,e,r,a){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,r,a){void 0===a&&(a=r),Object.defineProperty(t,a,{enumerable:!0,get:function(){return e[r];}});}:function(t,e,r,a){void 0===a&&(a=r),t[a]=e[r];}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e});}:function(t,e){t.default=e;}),n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.hasOwnProperty.call(t,r)&&i(e,t,r);return s(e,t),e;},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t};};Object.defineProperty(e,"__esModule",{value:!0}),e.Pattern=void 0;let l=n(globalThis.nodeRequire("os")),c=n(globalThis.nodeRequire("path")),h=n(r("c2d81037")),u=o(globalThis.nodeRequire("assert")),p=r("2a2f4701",!0),m=r("fc5787b7",!0),g=r("ecd08c56",!0),f="win32"===process.platform;class d{constructor(t,e=!1,r,a){let i;if(this.negate=!1,"string"==typeof t)i=t.trim();else{r=r||[],u.default(r.length,"Parameter 'segments' must not empty");let e=d.getLiteral(r[0]);u.default(e&&h.hasAbsoluteRoot(e),"Parameter 'segments' first element must be a root path"),i=new g.Path(r).toString().trim(),t&&(i=`!${i}`);}for(;i.startsWith("!");)this.negate=!this.negate,i=i.substr(1).trim();i=d.fixupPattern(i,a),this.segments=new g.Path(i).segments,this.trailingSeparator=h.normalizeSeparators(i).endsWith(c.sep),i=h.safeTrimTrailingSeparator(i);let s=!1,n=this.segments.map(t=>d.getLiteral(t)).filter(t=>!s&&!(s=""===t));this.searchPath=new g.Path(n).toString(),this.rootRegExp=new RegExp(d.regExpEscape(n[0]),f?"i":""),this.isImplicitPattern=e,i=f?i.replace(/\\/g,"/"):i,this.minimatch=new p.Minimatch(i,{dot:!0,nobrace:!0,nocase:f,nocomment:!0,noext:!0,nonegate:!0});}match(t){return("**"===this.segments[this.segments.length-1]?(t=h.normalizeSeparators(t)).endsWith(c.sep)||!1!==this.isImplicitPattern||(t=`${t}${c.sep}`):t=h.safeTrimTrailingSeparator(t),this.minimatch.match(t))?this.trailingSeparator?m.MatchKind.Directory:m.MatchKind.All:m.MatchKind.None;}partialMatch(t){return(t=h.safeTrimTrailingSeparator(t),h.dirname(t)===t)?this.rootRegExp.test(t):this.minimatch.matchOne(t.split(f?/\\+/:/\/+/),this.minimatch.set[0],!0);}static globEscape(t){return(f?t:t.replace(/\\/g,"\\\\")).replace(/(\[)(?=[^/]+\])/g,"[[]").replace(/\?/g,"[?]").replace(/\*/g,"[*]");}static fixupPattern(t,e){u.default(t,"pattern cannot be empty");let r=new g.Path(t).segments.map(t=>d.getLiteral(t));if(u.default(r.every((t,e)=>("."!==t||0===e)&&".."!==t),`Invalid pattern '${t}'. Relative pathing '.' and '..' is not allowed.`),u.default(!h.hasRoot(t)||r[0],`Invalid pattern '${t}'. Root segment must not contain globs.`),"."===(t=h.normalizeSeparators(t))||t.startsWith(`.${c.sep}`))t=d.globEscape(process.cwd())+t.substr(1);else if("~"===t||t.startsWith(`~${c.sep}`))e=e||l.homedir(),u.default(e,"Unable to determine HOME directory"),u.default(h.hasAbsoluteRoot(e),`Expected HOME directory to be a rooted path. Actual '${e}'`),t=d.globEscape(e)+t.substr(1);else if(f&&(t.match(/^[A-Z]:$/i)||t.match(/^[A-Z]:[^\\]/i))){let e=h.ensureAbsoluteRoot("C:\\dummy-root",t.substr(0,2));t.length>2&&!e.endsWith("\\")&&(e+="\\"),t=d.globEscape(e)+t.substr(2);}else if(f&&("\\"===t||t.match(/^\\[^\\]/))){let e=h.ensureAbsoluteRoot("C:\\dummy-root","\\");e.endsWith("\\")||(e+="\\"),t=d.globEscape(e)+t.substr(1);}else t=h.ensureAbsoluteRoot(d.globEscape(process.cwd()),t);return h.normalizeSeparators(t);}static getLiteral(t){let e="";for(let r=0;r<t.length;r++){let a=t[r];if("\\"===a&&!f&&r+1<t.length){e+=t[++r];continue;}if("*"===a||"?"===a)return"";if("["===a&&r+1<t.length){let a="",i=-1;for(let e=r+1;e<t.length;e++){let r=t[e];if("\\"===r&&!f&&e+1<t.length){a+=t[++e];continue;}if("]"===r){i=e;break;}a+=r;}if(i>=0){if(a.length>1)return"";if(a){e+=a,r=i;continue;}}}e+=a;}return e;}static regExpEscape(t){return t.replace(/[[\\^$.|?*+()]/g,"\\$&");}}e.Pattern=d;},"4796dc9d":function e(e,r,t,n){"use strict";var a,s;Object.defineProperty(r,"__esModule",{value:!0}),r.isValidErrorCode=r.httpStatusFromErrorCode=r.TwirpErrorCode=r.BadRouteError=r.InternalServerErrorWith=r.InternalServerError=r.RequiredArgumentError=r.InvalidArgumentError=r.NotFoundError=r.TwirpError=void 0;class o extends Error{constructor(e,r){super(r),this.code=a.Internal,this.meta={},this.code=e,this.msg=r,Object.setPrototypeOf(this,o.prototype);}withMeta(e,r){return this.meta[e]=r,this;}getMeta(e){return this.meta[e]||"";}withCause(e,r=!1){return this._originalCause=e,r&&this.withMeta("cause",e.message),this;}cause(){return this._originalCause;}toJSON(){try{return JSON.stringify({code:this.code,msg:this.msg,meta:this.meta});}catch(e){return'{"code": "internal", "msg": "There was an error but it could not be serialized into JSON"}';}}static fromObject(e){let r=new o(e.code||a.Unknown,e.msg||"unknown");return e.meta&&Object.keys(e.meta).forEach(t=>{r.withMeta(t,e.meta[t]);}),r;}}r.TwirpError=o,r.NotFoundError=class extends o{constructor(e){super(a.NotFound,e);}};class i extends o{constructor(e,r){super(a.InvalidArgument,e+" "+r),this.withMeta("argument",e);}}r.InvalidArgumentError=i,r.RequiredArgumentError=class extends i{constructor(e){super(e,"is required");}};class u extends o{constructor(e){super(a.Internal,e);}}function d(e){switch(e){case a.Canceled:return 408;case a.Unknown:return 500;case a.InvalidArgument:case a.Malformed:return 400;case a.DeadlineExceeded:return 408;case a.NotFound:case a.BadRoute:return 404;case a.AlreadyExists:return 409;case a.PermissionDenied:return 403;case a.Unauthenticated:return 401;case a.ResourceExhausted:return 429;case a.FailedPrecondition:return 412;case a.Aborted:return 409;case a.OutOfRange:return 400;case a.Unimplemented:return 501;case a.Internal:return 500;case a.Unavailable:return 503;case a.DataLoss:return 500;default:return 0;}}r.InternalServerError=u,r.InternalServerErrorWith=class extends u{constructor(e){super(e.message),this.withMeta("cause",e.name),this.withCause(e);}},r.BadRouteError=class extends o{constructor(e,r,t){super(a.BadRoute,e),this.withMeta("twirp_invalid_route",r+" "+t);}},(s=a=r.TwirpErrorCode||(r.TwirpErrorCode={})).Canceled="canceled",s.Unknown="unknown",s.InvalidArgument="invalid_argument",s.Malformed="malformed",s.DeadlineExceeded="deadline_exceeded",s.NotFound="not_found",s.BadRoute="bad_route",s.AlreadyExists="already_exists",s.PermissionDenied="permission_denied",s.Unauthenticated="unauthenticated",s.ResourceExhausted="resource_exhausted",s.FailedPrecondition="failed_precondition",s.Aborted="aborted",s.OutOfRange="out_of_range",s.Unimplemented="unimplemented",s.Internal="internal",s.Unavailable="unavailable",s.DataLoss="data_loss",r.httpStatusFromErrorCode=d,r.isValidErrorCode=function(e){return 0!=d(e);};},"48f2c5a4":function e(e,i,t,o){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,i,t,o){void 0===o&&(o=t),Object.defineProperty(e,o,{enumerable:!0,get:function(){return i[t];}});}:function(e,i,t,o){void 0===o&&(o=t),e[o]=i[t];}),c=this&&this.__setModuleDefault||(Object.create?function(e,i){Object.defineProperty(e,"default",{enumerable:!0,value:i});}:function(e,i){e.default=i;}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var i={};if(null!=e)for(var t in e)"default"!==t&&Object.hasOwnProperty.call(e,t)&&n(i,e,t);return c(i,e),i;};Object.defineProperty(i,"__esModule",{value:!0}),i.getOptions=void 0;let r=l(t("29bf5eaf"));i.getOptions=function(e){let i={followSymbolicLinks:!0,implicitDescendants:!0,matchDirectories:!0,omitBrokenSymbolicLinks:!0};return e&&("boolean"==typeof e.followSymbolicLinks&&(i.followSymbolicLinks=e.followSymbolicLinks,r.debug(`followSymbolicLinks '${i.followSymbolicLinks}'`)),"boolean"==typeof e.implicitDescendants&&(i.implicitDescendants=e.implicitDescendants,r.debug(`implicitDescendants '${i.implicitDescendants}'`)),"boolean"==typeof e.matchDirectories&&(i.matchDirectories=e.matchDirectories,r.debug(`matchDirectories '${i.matchDirectories}'`)),"boolean"==typeof e.omitBrokenSymbolicLinks&&(i.omitBrokenSymbolicLinks=e.omitBrokenSymbolicLinks,r.debug(`omitBrokenSymbolicLinks '${i.omitBrokenSymbolicLinks}'`))),i;};},"4cb0a9db":function r(r,t,e,s){"use strict";let a=e("d50d64f6",!0);t.implementation=class{constructor(r){let t=r[0],e=r[1],s=null;if(void 0!==e&&"failure"===(s=a.basicURLParse(e)))throw TypeError("Invalid base URL");let i=a.basicURLParse(t,{baseURL:s});if("failure"===i)throw TypeError("Invalid URL");this._url=i;}get href(){return a.serializeURL(this._url);}set href(r){let t=a.basicURLParse(r);if("failure"===t)throw TypeError("Invalid URL");this._url=t;}get origin(){return a.serializeURLOrigin(this._url);}get protocol(){return this._url.scheme+":";}set protocol(r){a.basicURLParse(r+":",{url:this._url,stateOverride:"scheme start"});}get username(){return this._url.username;}set username(r){a.cannotHaveAUsernamePasswordPort(this._url)||a.setTheUsername(this._url,r);}get password(){return this._url.password;}set password(r){a.cannotHaveAUsernamePasswordPort(this._url)||a.setThePassword(this._url,r);}get host(){let r=this._url;return null===r.host?"":null===r.port?a.serializeHost(r.host):a.serializeHost(r.host)+":"+a.serializeInteger(r.port);}set host(r){this._url.cannotBeABaseURL||a.basicURLParse(r,{url:this._url,stateOverride:"host"});}get hostname(){return null===this._url.host?"":a.serializeHost(this._url.host);}set hostname(r){this._url.cannotBeABaseURL||a.basicURLParse(r,{url:this._url,stateOverride:"hostname"});}get port(){return null===this._url.port?"":a.serializeInteger(this._url.port);}set port(r){a.cannotHaveAUsernamePasswordPort(this._url)||(""===r?this._url.port=null:a.basicURLParse(r,{url:this._url,stateOverride:"port"}));}get pathname(){return this._url.cannotBeABaseURL?this._url.path[0]:0===this._url.path.length?"":"/"+this._url.path.join("/");}set pathname(r){this._url.cannotBeABaseURL||(this._url.path=[],a.basicURLParse(r,{url:this._url,stateOverride:"path start"}));}get search(){return null===this._url.query||""===this._url.query?"":"?"+this._url.query;}set search(r){let t=this._url;if(""===r){t.query=null;return;}let e="?"===r[0]?r.substring(1):r;t.query="",a.basicURLParse(e,{url:t,stateOverride:"query"});}get hash(){return null===this._url.fragment||""===this._url.fragment?"":"#"+this._url.fragment;}set hash(r){if(""===r){this._url.fragment=null;return;}let t="#"===r[0]?r.substring(1):r;this._url.fragment="",a.basicURLParse(t,{url:this._url,stateOverride:"fragment"});}toJSON(){return this.href;}};},"5ba0ffaf":function e(e,t,n,i){"use strict";var o=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(o,r){function c(e){try{u(i.next(e));}catch(e){r(e);}}function l(e){try{u(i.throw(e));}catch(e){r(e);}}function u(e){var t;e.done?o(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t);})).then(c,l);}u((i=i.apply(e,t||[])).next());});};Object.defineProperty(t,"__esModule",{value:!0}),t.hashFiles=t.create=void 0;let r=n("27939508",!0),c=n("eed9b987",!0);function l(e,t){return o(this,void 0,void 0,function*(){return yield r.DefaultGlobber.create(e,t);});}t.create=l,t.hashFiles=function(e,t="",n,i=!1){return o(this,void 0,void 0,function*(){let o=!0;n&&"boolean"==typeof n.followSymbolicLinks&&(o=n.followSymbolicLinks);let r=yield l(e,{followSymbolicLinks:o});return c.hashFiles(r,t,i);});};},"5bc3336c":function e(e,r,t,n){"use strict";var o=this&&this.__awaiter||function(e,r,t,n){return new(t||(t=Promise))(function(o,i){function s(e){try{d(n.next(e));}catch(e){i(e);}}function u(e){try{d(n.throw(e));}catch(e){i(e);}}function d(e){var r;e.done?o(e.value):((r=e.value)instanceof t?r:new t(function(e){e(r);})).then(s,u);}d((n=n.apply(e,r||[])).next());});};Object.defineProperty(r,"__esModule",{value:!0}),r.isHook=r.chainHooks=void 0,r.chainHooks=function(...e){return 0===e.length?null:1===e.length?e[0]:{requestReceived(r){return o(this,void 0,void 0,function*(){for(let t of e)t.requestReceived&&(yield t.requestReceived(r));});},requestPrepared(r){return o(this,void 0,void 0,function*(){for(let t of e)t.requestPrepared&&(console.warn("hook requestPrepared is deprecated and will be removed in the next release. Please use responsePrepared instead."),yield t.requestPrepared(r));});},responsePrepared(r){return o(this,void 0,void 0,function*(){for(let t of e)t.responsePrepared&&(yield t.responsePrepared(r));});},requestSent(r){return o(this,void 0,void 0,function*(){for(let t of e)t.requestSent&&(console.warn("hook requestSent is deprecated and will be removed in the next release. Please use responseSent instead."),yield t.requestSent(r));});},responseSent(r){return o(this,void 0,void 0,function*(){for(let t of e)t.responseSent&&(yield t.responseSent(r));});},requestRouted(r){return o(this,void 0,void 0,function*(){for(let t of e)t.requestRouted&&(yield t.requestRouted(r));});},error(r,t){return o(this,void 0,void 0,function*(){for(let n of e)n.error&&(yield n.error(r,t));});}};},r.isHook=function(e){return"requestReceived"in e||"requestPrepared"in e||"requestSent"in e||"requestRouted"in e||"responsePrepared"in e||"responseSent"in e||"error"in e;};},"5f58c135":function e(e,t,i,n){"use strict";let{Readable:r}=globalThis.nodeRequire("node:stream",!0),{inherits:o}=globalThis.nodeRequire("node:util",!0),a=i("26dfd58a",!0),s=i("00a691d3",!0),l=i("e67ced7e",!0),d=i("7680c45b",!0),f=i("43216912",!0),c=/^boundary$/i,u=/^form-data$/i,h=/^charset$/i,p=/^filename$/i,m=/^name$/i;function _(e,t){let i,n,r,o,_;let g=this,L=t.limits,v=t.isPartAFile||((e,t,i)=>"application/octet-stream"===t||void 0!==i),w=t.parsedConType||[],k=t.defCharset||"utf8",S=t.preservePath,A={highWaterMark:t.fileHwm};for(i=0,n=w.length;i<n;++i)if(Array.isArray(w[i])&&c.test(w[i][0])){r=w[i][1];break;}function C(){0===T&&W&&!e._done&&(W=!1,g.end());}if("string"!=typeof r)throw Error("Multipart: Boundary not found");let x=f(L,"fieldSize",1048576),D=f(L,"fileSize",1/0),F=f(L,"files",1/0),M=f(L,"fields",1/0),P=f(L,"parts",1/0),R=f(L,"headerPairs",2e3),$=f(L,"headerSize",81920),z=0,H=0,T=0,W=!1;this._needDrain=!1,this._pause=!1,this._cb=void 0,this._nparts=0,this._boy=e;let q={boundary:r,maxHeaderPairs:R,maxHeaderSize:$,partHwm:A.highWaterMark,highWaterMark:t.highWaterMark};this.parser=new a(q),this.parser.on("drain",function(){if(g._needDrain=!1,g._cb&&!g._pause){let e=g._cb;g._cb=void 0,e();}}).on("part",function t(r){if(++g._nparts>P)return g.parser.removeListener("part",t),g.parser.on("part",b),e.hitPartsLimit=!0,e.emit("partsLimit"),b(r);if(_){let e=_;e.emit("end"),e.removeAllListeners("end");}r.on("header",function(t){let a,f,c,L,w,P,R,$;let W=0;if(t["content-type"]&&(c=s(t["content-type"][0]))[0]){for(i=0,a=c[0].toLowerCase(),n=c.length;i<n;++i)if(h.test(c[i][0])){L=c[i][1].toLowerCase();break;}}if(void 0===a&&(a="text/plain"),void 0===L&&(L=k),!t["content-disposition"]||(c=s(t["content-disposition"][0]),!u.test(c[0])))return b(r);for(i=0,n=c.length;i<n;++i)m.test(c[i][0])?f=c[i][1]:p.test(c[i][0])&&(P=c[i][1],S||(P=d(P)));if(w=t["content-transfer-encoding"]?t["content-transfer-encoding"][0].toLowerCase():"7bit",v(f,a,P)){if(z===F)return e.hitFilesLimit||(e.hitFilesLimit=!0,e.emit("filesLimit")),b(r);if(++z,0===e.listenerCount("file")){g.parser._ignore();return;}++T;let t=new y(A);o=t,t.on("end",function(){if(--T,g._pause=!1,C(),g._cb&&!g._needDrain){let e=g._cb;g._cb=void 0,e();}}),t._read=function(e){if(g._pause&&(g._pause=!1,g._cb&&!g._needDrain)){let e=g._cb;g._cb=void 0,e();}},e.emit("file",f,t,P,w,a),R=function(e){if((W+=e.length)>D){let i=D-W+e.length;i>0&&t.push(e.slice(0,i)),t.truncated=!0,t.bytesRead=D,r.removeAllListeners("data"),t.emit("limit");return;}t.push(e)||(g._pause=!0),t.bytesRead=W;},$=function(){o=void 0,t.push(null);};}else{if(H===M)return e.hitFieldsLimit||(e.hitFieldsLimit=!0,e.emit("fieldsLimit")),b(r);++H,++T;let t="",i=!1;_=r,R=function(e){if((W+=e.length)>x){let n=x-(W-e.length);t+=e.toString("binary",0,n),i=!0,r.removeAllListeners("data");}else t+=e.toString("binary");},$=function(){_=void 0,t.length&&(t=l(t,"binary",L)),e.emit("field",f,t,!1,i,w,a),--T,C();};}r._readableState.sync=!1,r.on("data",R),r.on("end",$);}).on("error",function(e){o&&o.emit("error",e);});}).on("error",function(t){e.emit("error",t);}).on("finish",function(){W=!0,C();});}function b(e){e.resume();}function y(e){r.call(this,e),this.bytesRead=0,this.truncated=!1;}_.detect=/^multipart\/form-data/i,_.prototype.write=function(e,t){let i=this.parser.write(e);i&&!this._pause?t():(this._needDrain=!i,this._cb=t);},_.prototype.end=function(){let e=this;e.parser.writable?e.parser.end():e._boy._done||process.nextTick(function(){e._boy._done=!0,e._boy.emit("finish");});},o(y,r),y.prototype._read=function(e){},e.exports=_;},"61b7b39e":function e(e,t,r,o){"use strict";var n,i=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r];}});}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r];}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t});}:function(e,t){e.default=t;}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return a(t,e),t;},u=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))(function(n,i){function a(e){try{u(o.next(e));}catch(e){i(e);}}function s(e){try{u(o.throw(e));}catch(e){i(e);}}function u(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t);})).then(a,s);}u((o=o.apply(e,t||[])).next());});},c=this&&this.__rest||function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&0>t.indexOf(o)&&(r[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,o=Object.getOwnPropertySymbols(e);n<o.length;n++)0>t.indexOf(o[n])&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(r[o[n]]=e[o[n]]);return r;};Object.defineProperty(t,"__esModule",{value:!0}),t.Gateway=t.Pattern=void 0;let d=globalThis.nodeRequire("querystring",!0),l=s(r("62ff71b8")),p=r("026b7588",!0),y=r("4796dc9d",!0),f=r("34aa5a3e",!0),h=r("f7c160d5",!0);(n=t.Pattern||(t.Pattern={})).POST="post",n.GET="get",n.PATCH="patch",n.PUT="put",n.DELETE="delete",t.Gateway=class{constructor(e){this.routes=e;}twirpRewrite(e="/twirp"){return(t,r,o)=>{this.rewrite(t,r,e).then(()=>o()).catch(e=>{e instanceof y.TwirpError&&(e.code!==y.TwirpErrorCode.NotFound?h.writeError(r,e):o());});};}rewrite(e,t,r="/twirp"){return u(this,void 0,void 0,function*(){let[o,n]=this.matchRoute(e),i=yield this.prepareTwirpBody(e,o,n),a=`${r}/${n.packageName}.${n.serviceName}/${n.methodName}`;if(e.url=a,e.originalUrl=a,e.method="POST",e.headers["content-type"]="application/json",e.rawBody=Buffer.from(JSON.stringify(i)),n.responseBodyKey){let e=t.end.bind(t);t.end=function(r){200===t.statusCode?e(`{ "${n.responseBodyKey}": ${r} }`):e(r);};}});}reverseProxy(e){let t=f.NodeHttpRPC(e);return(e,r)=>u(this,void 0,void 0,function*(){try{let o;let[n,i]=this.matchRoute(e),a=yield this.prepareTwirpBody(e,n,i),s=yield t.request(`${i.packageName}.${i.serviceName}`,i.methodName,"application/json",a);r.statusCode=200,r.setHeader("content-type","application/json"),o=i.responseBodyKey?JSON.stringify({[i.responseBodyKey]:s}):JSON.stringify(s),r.end(o);}catch(e){h.writeError(r,e);}});}prepareTwirpBody(e,t,r){return u(this,void 0,void 0,function*(){let o=t.params,{query_string:n}=o,i=Object.assign({},c(o,["query_string"]));n&&"*"!==r.bodyKey&&(i=Object.assign(Object.assign({},this.parseQueryString(n)),i));let a={};if(r.bodyKey){let t=yield p.getRequestData(e);try{let e=JSON.parse(t.toString()||"{}");"*"===r.bodyKey?a=e:a[r.bodyKey]=e;}catch(e){throw new y.TwirpError(y.TwirpErrorCode.Malformed,"the json request could not be decoded").withCause(e,!0);}}return Object.assign(Object.assign({},a),i);});}matchRoute(e){var t;let r=null===(t=e.method)||void 0===t?void 0:t.toLowerCase();if(!r)throw new y.BadRouteError("method not allowed",e.method||"",e.url||"");for(let t of this.routes[r]){let r=t.matcher(e.url||"/");if(r)return[r,t];}throw new y.NotFoundError(`url ${e.url} not found`);}parseQueryString(e){let t=d.parse(e.replace("?",""));return l.object(t);}};},"621d18e2":function e(e,t,u,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0});},"649dc14e":function e(e,t,r,o){"use strict";let n=r("8d05eeb9",!0),i=r("6a5de2e4",!0),s=r("4cb0a9db",!0),p=i.implSymbol;function a(t){if(!this||this[p]||!(this instanceof a))throw TypeError("Failed to construct 'URL': Please use the 'new' operator, this DOM object constructor cannot be called as a function.");if(arguments.length<1)throw TypeError("Failed to construct 'URL': 1 argument required, but only "+arguments.length+" present.");let r=[];for(let e=0;e<arguments.length&&e<2;++e)r[e]=arguments[e];r[0]=n.USVString(r[0]),void 0!==r[1]&&(r[1]=n.USVString(r[1])),e.exports.setup(this,r);}a.prototype.toJSON=function(){if(!this||!e.exports.is(this))throw TypeError("Illegal invocation");let t=[];for(let e=0;e<arguments.length&&e<0;++e)t[e]=arguments[e];return this[p].toJSON.apply(this[p],t);},Object.defineProperty(a.prototype,"href",{get(){return this[p].href;},set(e){e=n.USVString(e),this[p].href=e;},enumerable:!0,configurable:!0}),a.prototype.toString=function(){if(!this||!e.exports.is(this))throw TypeError("Illegal invocation");return this.href;},Object.defineProperty(a.prototype,"origin",{get(){return this[p].origin;},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"protocol",{get(){return this[p].protocol;},set(e){e=n.USVString(e),this[p].protocol=e;},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"username",{get(){return this[p].username;},set(e){e=n.USVString(e),this[p].username=e;},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"password",{get(){return this[p].password;},set(e){e=n.USVString(e),this[p].password=e;},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"host",{get(){return this[p].host;},set(e){e=n.USVString(e),this[p].host=e;},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"hostname",{get(){return this[p].hostname;},set(e){e=n.USVString(e),this[p].hostname=e;},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"port",{get(){return this[p].port;},set(e){e=n.USVString(e),this[p].port=e;},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"pathname",{get(){return this[p].pathname;},set(e){e=n.USVString(e),this[p].pathname=e;},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"search",{get(){return this[p].search;},set(e){e=n.USVString(e),this[p].search=e;},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"hash",{get(){return this[p].hash;},set(e){e=n.USVString(e),this[p].hash=e;},enumerable:!0,configurable:!0}),e.exports={is:e=>!!e&&e[p]instanceof s.implementation,create(e,t){let r=Object.create(a.prototype);return this.setup(r,e,t),r;},setup(e,t,r){r||(r={}),r.wrapper=e,e[p]=new s.implementation(t,r),e[p][i.wrapperSymbol]=e;},interface:a,expose:{Window:{URL:a},Worker:{URL:a}}};},"65608846":function e(e,t,i,o){"use strict";let n=globalThis.nodeRequire("node:util",!0).inherits,l=globalThis.nodeRequire("node:stream",!0).Readable;function r(e){l.call(this,e);}n(r,l),r.prototype._read=function(e){},e.exports=r;},"663b16e6":function e(e,t,c,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SearchState=void 0,t.SearchState=class{constructor(e,t){this.path=e,this.level=t;}};},"6a5de2e4":function r(r,e,t,p){"use strict";r.exports.mixin=function(r,e){let t=Object.getOwnPropertyNames(e);for(let p=0;p<t.length;++p)Object.defineProperty(r,t[p],Object.getOwnPropertyDescriptor(e,t[p]));},r.exports.wrapperSymbol=Symbol("wrapper"),r.exports.implSymbol=Symbol("impl"),r.exports.wrapperForImpl=function(e){return e[r.exports.wrapperSymbol];},r.exports.implForWrapper=function(e){return e[r.exports.implSymbol];};},"7680c45b":function t(t,r,e,n){"use strict";t.exports=function(t){if("string"!=typeof t)return"";for(var r=t.length-1;r>=0;--r)switch(t.charCodeAt(r)){case 47:case 92:return".."===(t=t.slice(r+1))||"."===t?"":t;}return".."===t||"."===t?"":t;};},"779b6899":function e(e,t,r,o){let n;e._m(t),e.o(t,"Headers",()=>L),e.o(t,"Request",()=>Z),e.o(t,"Response",()=>H),e.o(t,"FetchError",()=>b),e.o(t,"AbortError",()=>V);var i=e.i(r("stream")),s=e.i(r("http")),l=e.i(r("url")),u=e.i(r("c525ca30")),a=e.i(r("https")),f=e.i(r("zlib"));let c=e.f(i).Readable,d=Symbol("buffer"),h=Symbol("type");class p{constructor(){this[h]="";let e=arguments[0],t=arguments[1],r=[];if(e){let t=Number(e.length);for(let o=0;o<t;o++){let t;let n=e[o];n instanceof Buffer?t=n:t=ArrayBuffer.isView(n)?Buffer.from(n.buffer,n.byteOffset,n.byteLength):n instanceof ArrayBuffer?Buffer.from(n):n instanceof p?n[d]:Buffer.from("string"==typeof n?n:String(n)),t.length,r.push(t);}}this[d]=Buffer.concat(r);let o=t&&void 0!==t.type&&String(t.type).toLowerCase();o&&!/[^\u0020-\u007E]/.test(o)&&(this[h]=o);}get size(){return this[d].length;}get type(){return this[h];}text(){return Promise.resolve(this[d].toString());}arrayBuffer(){let e=this[d];return Promise.resolve(e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength));}stream(){let e=new c;return e._read=function(){},e.push(this[d]),e.push(null),e;}toString(){return"[object Blob]";}slice(){let e;let t=this.size,r=arguments[0],o=arguments[1];e=void 0===r?0:r<0?Math.max(t+r,0):Math.min(r,t);let n=Math.max((void 0===o?t:o<0?Math.max(t+o,0):Math.min(o,t))-e,0),i=this[d].slice(e,e+n),s=new p([],{type:arguments[2]});return s[d]=i,s;}}function b(e,t,r){Error.call(this,e),this.message=e,this.type=t,r&&(this.code=this.errno=r.code),Error.captureStackTrace(this,this.constructor);}Object.defineProperties(p.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}}),Object.defineProperty(p.prototype,Symbol.toStringTag,{value:"Blob",writable:!1,enumerable:!1,configurable:!0}),b.prototype=Object.create(Error.prototype),b.prototype.constructor=b,b.prototype.name="FetchError";try{n=r("75fa8f73",!0).convert;}catch(e){}let y=Symbol("Body internals"),m=e.f(i).PassThrough;function g(t){var r=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=o.size,s=o.timeout;null==t?t=null:v(t)?t=Buffer.from(t.toString()):S(t)||Buffer.isBuffer(t)||("[object ArrayBuffer]"===Object.prototype.toString.call(t)?t=Buffer.from(t):ArrayBuffer.isView(t)?t=Buffer.from(t.buffer,t.byteOffset,t.byteLength):t instanceof e.f(i)||(t=Buffer.from(String(t)))),this[y]={body:t,disturbed:!1,error:null},this.size=void 0===n?0:n,this.timeout=void 0===s?0:s,t instanceof e.f(i)&&t.on("error",function(e){let t="AbortError"===e.name?e:new b(`Invalid response body while trying to fetch ${r.url}: ${e.message}`,"system",e);r[y].error=t;});}function w(){var t=this;if(this[y].disturbed)return g.Promise.reject(TypeError(`body used already for: ${this.url}`));if(this[y].disturbed=!0,this[y].error)return g.Promise.reject(this[y].error);let r=this.body;if(null===r)return g.Promise.resolve(Buffer.alloc(0));if(S(r)&&(r=r.stream()),Buffer.isBuffer(r))return g.Promise.resolve(r);if(!(r instanceof e.f(i)))return g.Promise.resolve(Buffer.alloc(0));let o=[],n=0,s=!1;return new g.Promise(function(e,i){let l;t.timeout&&(l=setTimeout(function(){s=!0,i(new b(`Response timeout while trying to fetch ${t.url} (over ${t.timeout}ms)`,"body-timeout"));},t.timeout)),r.on("error",function(e){"AbortError"===e.name?(s=!0,i(e)):i(new b(`Invalid response body while trying to fetch ${t.url}: ${e.message}`,"system",e));}),r.on("data",function(e){if(!s&&null!==e){if(t.size&&n+e.length>t.size){s=!0,i(new b(`content size at ${t.url} over limit: ${t.size}`,"max-size"));return;}n+=e.length,o.push(e);}}),r.on("end",function(){if(!s){clearTimeout(l);try{e(Buffer.concat(o,n));}catch(e){i(new b(`Could not create Buffer from response body for ${t.url}: ${e.message}`,"system",e));}}});});}function v(e){return"object"==typeof e&&"function"==typeof e.append&&"function"==typeof e.delete&&"function"==typeof e.get&&"function"==typeof e.getAll&&"function"==typeof e.has&&"function"==typeof e.set&&("URLSearchParams"===e.constructor.name||"[object URLSearchParams]"===Object.prototype.toString.call(e)||"function"==typeof e.sort);}function S(e){return"object"==typeof e&&"function"==typeof e.arrayBuffer&&"string"==typeof e.type&&"function"==typeof e.stream&&"function"==typeof e.constructor&&"string"==typeof e.constructor.name&&/^(Blob|File)$/.test(e.constructor.name)&&/^(Blob|File)$/.test(e[Symbol.toStringTag]);}function T(t){let r,o;let n=t.body;if(t.bodyUsed)throw Error("cannot clone body after it is used");return n instanceof e.f(i)&&"function"!=typeof n.getBoundary&&(r=new m,o=new m,n.pipe(r),n.pipe(o),t[y].body=r,n=o),n;}function E(t){if(null===t)return null;if("string"==typeof t)return"text/plain;charset=UTF-8";if(v(t))return"application/x-www-form-urlencoded;charset=UTF-8";if(S(t))return t.type||null;if(Buffer.isBuffer(t))return null;if("[object ArrayBuffer]"===Object.prototype.toString.call(t))return null;if(ArrayBuffer.isView(t))return null;else if("function"==typeof t.getBoundary)return`multipart/form-data;boundary=${t.getBoundary()}`;else if(t instanceof e.f(i))return null;else return"text/plain;charset=UTF-8";}function j(e){let t=e.body;return null===t?0:S(t)?t.size:Buffer.isBuffer(t)?t.length:t&&"function"==typeof t.getLengthSync&&(t._lengthRetrievers&&0==t._lengthRetrievers.length||t.hasKnownLength&&t.hasKnownLength())?t.getLengthSync():null;}g.prototype={get body(){return this[y].body;},get bodyUsed(){return this[y].disturbed;},arrayBuffer(){return w.call(this).then(function(e){return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);});},blob(){let e=this.headers&&this.headers.get("content-type")||"";return w.call(this).then(function(t){return Object.assign(new p([],{type:e.toLowerCase()}),{[d]:t});});},json(){var e=this;return w.call(this).then(function(t){try{return JSON.parse(t.toString());}catch(t){return g.Promise.reject(new b(`invalid json response body at ${e.url} reason: ${t.message}`,"invalid-json"));}});},text(){return w.call(this).then(function(e){return e.toString();});},buffer(){return w.call(this);},textConverted(){var e=this;return w.call(this).then(function(t){return function(e,t){let r,o;if("function"!=typeof n)throw Error("The package `encoding` must be installed to use the textConverted() function");let i=t.get("content-type"),s="utf-8";return i&&(r=/charset=([^;]*)/i.exec(i)),o=e.slice(0,1024).toString(),!r&&o&&(r=/<meta.+?charset=(['"])(.+?)\1/i.exec(o)),!r&&o&&(!(r=/<meta[\s]+?http-equiv=(['"])content-type\1[\s]+?content=(['"])(.+?)\2/i.exec(o))&&(r=/<meta[\s]+?content=(['"])(.+?)\1[\s]+?http-equiv=(['"])content-type\3/i.exec(o))&&r.pop(),r&&(r=/charset=(.*)/i.exec(r.pop()))),!r&&o&&(r=/<\?xml.+?encoding=(['"])(.+?)\1/i.exec(o)),r&&("gb2312"===(s=r.pop())||"gbk"===s)&&(s="gb18030"),n(e,"UTF-8",s).toString();}(t,e.headers);});}},Object.defineProperties(g.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}}),g.mixIn=function(e){for(let t of Object.getOwnPropertyNames(g.prototype))if(!(t in e)){let r=Object.getOwnPropertyDescriptor(g.prototype,t);Object.defineProperty(e,t,r);}},g.Promise=global.Promise;let O=/[^\^_`a-zA-Z\-0-9!#$%&'*+.|~]/,P=/[^\t\x20-\x7e\x80-\xff]/;function x(e){if(e=`${e}`,O.test(e)||""===e)throw TypeError(`${e} is not a legal HTTP header name`);}function B(e){if(e=`${e}`,P.test(e))throw TypeError(`${e} is not a legal HTTP header value`);}function R(e,t){for(let r in t=t.toLowerCase(),e)if(r.toLowerCase()===t)return r;}let $=Symbol("map");class L{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(this[$]=Object.create(null),e instanceof L){let t=e.raw();for(let e of Object.keys(t))for(let r of t[e])this.append(e,r);return;}if(null==e);else if("object"==typeof e){let t=e[Symbol.iterator];if(null!=t){if("function"!=typeof t)throw TypeError("Header pairs must be iterable");let r=[];for(let t of e){if("object"!=typeof t||"function"!=typeof t[Symbol.iterator])throw TypeError("Each header pair must be iterable");r.push(Array.from(t));}for(let e of r){if(2!==e.length)throw TypeError("Each header pair must be a name/value tuple");this.append(e[0],e[1]);}}else for(let t of Object.keys(e)){let r=e[t];this.append(t,r);}}else throw TypeError("Provided initializer must be an object");}get(e){x(e=`${e}`);let t=R(this[$],e);return void 0===t?null:this[$][t].join(", ");}forEach(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=A(this),o=0;for(;o<r.length;){var n=r[o];let i=n[0],s=n[1];e.call(t,s,i,this),r=A(this),o++;}}set(e,t){e=`${e}`,t=`${t}`,x(e),B(t);let r=R(this[$],e);this[$][void 0!==r?r:e]=[t];}append(e,t){e=`${e}`,t=`${t}`,x(e),B(t);let r=R(this[$],e);void 0!==r?this[$][r].push(t):this[$][e]=[t];}has(e){return x(e=`${e}`),void 0!==R(this[$],e);}delete(e){x(e=`${e}`);let t=R(this[$],e);void 0!==t&&delete this[$][t];}raw(){return this[$];}keys(){return k(this,"key");}values(){return k(this,"value");}[Symbol.iterator](){return k(this,"key+value");}}function A(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"key+value";return Object.keys(e[$]).sort().map("key"===t?function(e){return e.toLowerCase();}:"value"===t?function(t){return e[$][t].join(", ");}:function(t){return[t.toLowerCase(),e[$][t].join(", ")];});}L.prototype.entries=L.prototype[Symbol.iterator],Object.defineProperty(L.prototype,Symbol.toStringTag,{value:"Headers",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(L.prototype,{get:{enumerable:!0},forEach:{enumerable:!0},set:{enumerable:!0},append:{enumerable:!0},has:{enumerable:!0},delete:{enumerable:!0},keys:{enumerable:!0},values:{enumerable:!0},entries:{enumerable:!0}});let C=Symbol("internal");function k(e,t){let r=Object.create(z);return r[C]={target:e,kind:t,index:0},r;}let z=Object.setPrototypeOf({next(){if(!this||Object.getPrototypeOf(this)!==z)throw TypeError("Value of `this` is not a HeadersIterator");var e=this[C];let t=e.target,r=e.kind,o=e.index,n=A(t,r);return o>=n.length?{value:void 0,done:!0}:(this[C].index=o+1,{value:n[o],done:!1});}},Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));Object.defineProperty(z,Symbol.toStringTag,{value:"HeadersIterator",writable:!1,enumerable:!1,configurable:!0});let U=Symbol("Response internals"),_=e.f(s).STATUS_CODES;class H{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};g.call(this,e,t);let r=t.status||200,o=new L(t.headers);if(null!=e&&!o.has("Content-Type")){let t=E(e);t&&o.append("Content-Type",t);}this[U]={url:t.url,status:r,statusText:t.statusText||_[r],headers:o,counter:t.counter};}get url(){return this[U].url||"";}get status(){return this[U].status;}get ok(){return this[U].status>=200&&this[U].status<300;}get redirected(){return this[U].counter>0;}get statusText(){return this[U].statusText;}get headers(){return this[U].headers;}clone(){return new H(T(this),{url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected});}}g.mixIn(H.prototype),Object.defineProperties(H.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}}),Object.defineProperty(H.prototype,Symbol.toStringTag,{value:"Response",writable:!1,enumerable:!1,configurable:!0});let q=Symbol("Request internals"),F=e.f(l).URL||e.f(u).URL,I=e.f(l).parse,M=e.f(l).format;function D(e){return/^[a-zA-Z][a-zA-Z\d+\-.]*:/.exec(e)&&(e=new F(e).toString()),I(e);}let G="destroy"in e.f(i).Readable.prototype;function N(e){return"object"==typeof e&&"object"==typeof e[q];}class Z{constructor(e){let t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};N(e)?t=D(e.url):(t=e&&e.href?D(e.href):D(`${e}`),e={});let o=r.method||e.method||"GET";if(o=o.toUpperCase(),(null!=r.body||N(e)&&null!==e.body)&&("GET"===o||"HEAD"===o))throw TypeError("Request with GET/HEAD method cannot have body");let n=null!=r.body?r.body:N(e)&&null!==e.body?T(e):null;g.call(this,n,{timeout:r.timeout||e.timeout||0,size:r.size||e.size||0});let i=new L(r.headers||e.headers||{});if(null!=n&&!i.has("Content-Type")){let e=E(n);e&&i.append("Content-Type",e);}let s=N(e)?e.signal:null;if("signal"in r&&(s=r.signal),null!=s&&!function(e){let t=e&&"object"==typeof e&&Object.getPrototypeOf(e);return!!(t&&"AbortSignal"===t.constructor.name);}(s))throw TypeError("Expected signal to be an instanceof AbortSignal");this[q]={method:o,redirect:r.redirect||e.redirect||"follow",headers:i,parsedURL:t,signal:s},this.follow=void 0!==r.follow?r.follow:void 0!==e.follow?e.follow:20,this.compress=void 0!==r.compress?r.compress:void 0===e.compress||e.compress,this.counter=r.counter||e.counter||0,this.agent=r.agent||e.agent;}get method(){return this[q].method;}get url(){return M(this[q].parsedURL);}get headers(){return this[q].headers;}get redirect(){return this[q].redirect;}get signal(){return this[q].signal;}clone(){return new Z(this);}}function V(e){Error.call(this,e),this.type="aborted",this.message=e,Error.captureStackTrace(this,this.constructor);}g.mixIn(Z.prototype),Object.defineProperty(Z.prototype,Symbol.toStringTag,{value:"Request",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(Z.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}}),V.prototype=Object.create(Error.prototype),V.prototype.constructor=V,V.prototype.name="AbortError";let K=e.f(l).URL||e.f(u).URL,Y=e.f(i).PassThrough,J=function(e,t){let r=new K(t).hostname,o=new K(e).hostname;return r===o||"."===r[r.length-o.length-1]&&r.endsWith(o);};function W(t,r){if(!W.Promise)throw Error("native promise missing, set fetch.Promise to your favorite alternative");return g.Promise=W.Promise,new W.Promise(function(o,n){var l;let u,c;let d=new Z(t,r),h=function(t){let r=t[q].parsedURL,o=new L(t[q].headers);if(o.has("Accept")||o.set("Accept","*/*"),!r.protocol||!r.hostname)throw TypeError("Only absolute URLs are supported");if(!/^https?:$/.test(r.protocol))throw TypeError("Only HTTP(S) protocols are supported");if(t.signal&&t.body instanceof e.f(i).Readable&&!G)throw Error("Cancellation of streamed requests with AbortSignal is not supported in node < 8");let n=null;if(null==t.body&&/^(POST|PUT)$/i.test(t.method)&&(n="0"),null!=t.body){let e=j(t);"number"==typeof e&&(n=String(e));}n&&o.set("Content-Length",n),o.has("User-Agent")||o.set("User-Agent","node-fetch/1.0 (+https://github.com/bitinn/node-fetch)"),t.compress&&!o.has("Accept-Encoding")&&o.set("Accept-Encoding","gzip,deflate");let s=t.agent;return"function"==typeof s&&(s=s(r)),Object.assign({},r,{method:t.method,headers:function(e){let t=Object.assign({__proto__:null},e[$]),r=R(e[$],"Host");return void 0!==r&&(t[r]=t[r][0]),t;}(o),agent:s});}(d),p=("https:"===h.protocol?e.f(a):e.f(s)).request,y=d.signal,m=null,g=function(){let t=new V("The user aborted a request.");n(t),d.body&&d.body instanceof e.f(i).Readable&&Q(d.body,t),m&&m.body&&m.body.emit("error",t);};if(y&&y.aborted){g();return;}let w=function(){g(),T();},v=p(h);function T(){v.abort(),y&&y.removeEventListener("abort",w),clearTimeout(u);}y&&y.addEventListener("abort",w),d.timeout&&v.once("socket",function(e){u=setTimeout(function(){n(new b(`network timeout at: ${d.url}`,"request-timeout")),T();},d.timeout);}),v.on("error",function(e){n(new b(`request to ${d.url} failed, reason: ${e.message}`,"system",e)),m&&m.body&&Q(m.body,e),T();}),l=function(e){(!y||!y.aborted)&&m&&m.body&&Q(m.body,e);},v.on("socket",function(e){c=e;}),v.on("response",function(e){let t=e.headers;"chunked"!==t["transfer-encoding"]||t["content-length"]||e.once("close",function(e){if(c&&c.listenerCount("data")>0&&!e){let e=Error("Premature close");e.code="ERR_STREAM_PREMATURE_CLOSE",l(e);}});}),14>parseInt(process.version.substring(1))&&v.on("socket",function(e){e.addListener("close",function(t){let r=e.listenerCount("data")>0;if(m&&r&&!t&&!(y&&y.aborted)){let e=Error("Premature close");e.code="ERR_STREAM_PREMATURE_CLOSE",m.body.emit("error",e);}});}),v.on("response",function(t){clearTimeout(u);let r=function(e){let t=new L;for(let r of Object.keys(e))if(!O.test(r)){if(Array.isArray(e[r]))for(let o of e[r])P.test(o)||(void 0===t[$][r]?t[$][r]=[o]:t[$][r].push(o));else P.test(e[r])||(t[$][r]=[e[r]]);}return t;}(t.headers);if(W.isRedirect(t.statusCode)){let e=r.get("Location"),s=null;try{s=null===e?null:new K(e,d.url).toString();}catch(t){if("manual"!==d.redirect){n(new b(`uri requested responds with an invalid redirect URL: ${e}`,"invalid-redirect")),T();return;}}switch(d.redirect){case"error":n(new b(`uri requested responds with a redirect, redirect mode is set to error: ${d.url}`,"no-redirect")),T();return;case"manual":if(null!==s)try{r.set("Location",s);}catch(e){n(e);}break;case"follow":var i;if(null===s)break;if(d.counter>=d.follow){n(new b(`maximum redirect reached at: ${d.url}`,"max-redirect")),T();return;}let l={headers:new L(d.headers),follow:d.follow,counter:d.counter+1,agent:d.agent,compress:d.compress,method:d.method,body:d.body,signal:d.signal,timeout:d.timeout,size:d.size};if(!J(d.url,s)||(i=d.url,new K(s).protocol!==new K(i).protocol))for(let e of["authorization","www-authenticate","cookie","cookie2"])l.headers.delete(e);if(303!==t.statusCode&&d.body&&null===j(d)){n(new b("Cannot follow redirect with body being a readable stream","unsupported-redirect")),T();return;}(303===t.statusCode||(301===t.statusCode||302===t.statusCode)&&"POST"===d.method)&&(l.method="GET",l.body=void 0,l.headers.delete("content-length")),o(W(new Z(s,l))),T();return;}}t.once("end",function(){y&&y.removeEventListener("abort",w);});let s=t.pipe(new Y),l={url:d.url,status:t.statusCode,statusText:t.statusMessage,headers:r,size:d.size,timeout:d.timeout,counter:d.counter},a=r.get("Content-Encoding");if(!d.compress||"HEAD"===d.method||null===a||204===t.statusCode||304===t.statusCode){o(m=new H(s,l));return;}let c={flush:e.f(f).Z_SYNC_FLUSH,finishFlush:e.f(f).Z_SYNC_FLUSH};if("gzip"==a||"x-gzip"==a){o(m=new H(s=s.pipe(e.f(f).createGunzip(c)),l));return;}if("deflate"==a||"x-deflate"==a){let r=t.pipe(new Y);r.once("data",function(t){o(m=new H(s=(15&t[0])==8?s.pipe(e.f(f).createInflate()):s.pipe(e.f(f).createInflateRaw()),l));}),r.on("end",function(){m||o(m=new H(s,l));});return;}if("br"==a&&"function"==typeof e.f(f).createBrotliDecompress){o(m=new H(s=s.pipe(e.f(f).createBrotliDecompress()),l));return;}o(m=new H(s,l));}),function(e,t){let r=t.body;null===r?e.end():S(r)?r.stream().pipe(e):Buffer.isBuffer(r)?(e.write(r),e.end()):r.pipe(e);}(v,d);});}function Q(e,t){e.destroy?e.destroy(t):(e.emit("error",t),e.end());}W.isRedirect=function(e){return 301===e||302===e||303===e||307===e||308===e;},W.Promise=global.Promise,t.default=W;},"99303b28":function t(t,e,f,r){"use strict";let i=/\+/g,s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];function o(){this.buffer=void 0;}o.prototype.write=function(t){t=t.replace(i," ");let e="",f=0,r=0,o=t.length;for(;f<o;++f)void 0!==this.buffer?s[t.charCodeAt(f)]?(this.buffer+=t[f],++r,2===this.buffer.length&&(e+=String.fromCharCode(parseInt(this.buffer,16)),this.buffer=void 0)):(e+="%"+this.buffer,this.buffer=void 0,--f):"%"===t[f]&&(f>r&&(e+=t.substring(r,f),r=f),this.buffer="",++r);return r<o&&void 0===this.buffer&&(e+=t.substring(r)),e;},o.prototype.reset=function(){this.buffer=void 0;},t.exports=o;},"a45adabf":function t(t,e,i,s){"use strict";let r=globalThis.nodeRequire("node:stream",!0).Writable,{inherits:o}=globalThis.nodeRequire("node:util",!0),n=i("26dfd58a",!0),h=i("5f58c135",!0),p=i("0ea67bf0",!0),a=i("00a691d3",!0);function f(t){if(!(this instanceof f))return new f(t);if("object"!=typeof t)throw TypeError("Busboy expected an options-Object.");if("object"!=typeof t.headers)throw TypeError("Busboy expected an options-Object with headers-attribute.");if("string"!=typeof t.headers["content-type"])throw TypeError("Missing Content-Type-header.");let{headers:e,...i}=t;this.opts={autoDestroy:!1,...i},r.call(this,this.opts),this._done=!1,this._parser=this.getParserByHeaders(e),this._finished=!1;}o(f,r),f.prototype.emit=function(t){if("finish"===t){if(this._done){if(this._finished)return;}else{this._parser?.end();return;}this._finished=!0;}r.prototype.emit.apply(this,arguments);},f.prototype.getParserByHeaders=function(t){let e=a(t["content-type"]),i={defCharset:this.opts.defCharset,fileHwm:this.opts.fileHwm,headers:t,highWaterMark:this.opts.highWaterMark,isPartAFile:this.opts.isPartAFile,limits:this.opts.limits,parsedConType:e,preservePath:this.opts.preservePath};if(h.detect.test(e[0]))return new h(this,i);if(p.detect.test(e[0]))return new p(this,i);throw Error("Unsupported Content-Type.");},f.prototype._write=function(t,e,i){this._parser.write(t,i);},t.exports=f,t.exports.default=f,t.exports.Busboy=f,t.exports.Dicer=n;},"b0335f7e":function t(t,e,s,i){var r;r=function(){"use strict";var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},e={load:function(t,e,s={}){var i,r,n;for(i in e)n=e[i],s[i]=null!=(r=t[i])?r:n;return s;},overwrite:function(t,e,s={}){var i,r;for(i in t)r=t[i],void 0!==e[i]&&(s[i]=r);return s;}};o=class{constructor(t,e){this.incr=t,this.decr=e,this._first=null,this._last=null,this.length=0;}push(t){var e;this.length++,"function"==typeof this.incr&&this.incr(),e={value:t,prev:this._last,next:null},null!=this._last?(this._last.next=e,this._last=e):this._first=this._last=e;}shift(){var t;return null==this._first?void 0:(this.length--,"function"==typeof this.decr&&this.decr(),t=this._first.value,null!=(this._first=this._first.next)?this._first.prev=null:this._last=null,t);}first(){if(null!=this._first)return this._first.value;}getArray(){var t,e,s;for(t=this._first,s=[];null!=t;)s.push((e=t,t=t.next,e.value));return s;}forEachShift(t){var e;for(e=this.shift();null!=e;)t(e),e=this.shift();}debug(){var t,e,s,i,r;for(t=this._first,r=[];null!=t;)r.push((e=t,t=t.next,{value:e.value,prev:null!=(s=e.prev)?s.value:void 0,next:null!=(i=e.next)?i.value:void 0}));return r;}},h=class{constructor(t){if(this.instance=t,this._events={},null!=this.instance.on||null!=this.instance.once||null!=this.instance.removeAllListeners)throw Error("An Emitter already exists for this object");this.instance.on=(t,e)=>this._addListener(t,"many",e),this.instance.once=(t,e)=>this._addListener(t,"once",e),this.instance.removeAllListeners=(t=null)=>null!=t?delete this._events[t]:this._events={};}_addListener(t,e,s){var i;return null==(i=this._events)[t]&&(i[t]=[]),this._events[t].push({cb:s,status:e}),this.instance;}listenerCount(t){return null!=this._events[t]?this._events[t].length:0;}async trigger(t,...e){var s;try{if("debug"!==t&&this.trigger("debug",`Event triggered: ${t}`,e),null==this._events[t])return;return this._events[t]=this._events[t].filter(function(t){return"none"!==t.status;}),s=this._events[t].map(async t=>{var s;if("none"!==t.status){"once"===t.status&&(t.status="none");try{if(s="function"==typeof t.cb?t.cb(...e):void 0,"function"==typeof(null!=s?s.then:void 0))return await s;return s;}catch(t){return this.trigger("error",t),null;}}}),(await Promise.all(s)).find(function(t){return null!=t;});}catch(t){return this.trigger("error",t),null;}}},u=class{constructor(t){this.Events=new h(this),this._length=0,this._lists=(function(){var e,s;for(s=[],e=1;1<=t?e<=t:e>=t;1<=t?++e:--e)s.push(new o(()=>this.incr(),()=>this.decr()));return s;}).call(this);}incr(){if(0==this._length++)return this.Events.trigger("leftzero");}decr(){if(0==--this._length)return this.Events.trigger("zero");}push(t){return this._lists[t.options.priority].push(t);}queued(t){return null!=t?this._lists[t].length:this._length;}shiftAll(t){return this._lists.forEach(function(e){return e.forEachShift(t);});}getFirst(t=this._lists){var e,s,i;for(e=0,s=t.length;e<s;e++)if((i=t[e]).length>0)return i;return[];}shiftLastFrom(t){return this.getFirst(this._lists.slice(t).reverse()).shift();}},a=class extends Error{},l=class{constructor(t,s,i,r,n,o,h,u){this.task=t,this.args=s,this.rejectOnDrop=n,this.Events=o,this._states=h,this.Promise=u,this.options=e.load(i,r),this.options.priority=this._sanitizePriority(this.options.priority),this.options.id===r.id&&(this.options.id=`${this.options.id}-${this._randomIndex()}`),this.promise=new this.Promise((t,e)=>{this._resolve=t,this._reject=e;}),this.retryCount=0;}_sanitizePriority(t){var e;return(e=~~t!==t?5:t)<0?0:e>9?9:e;}_randomIndex(){return Math.random().toString(36).slice(2);}doDrop({error:t,message:e="This job has been dropped by Bottleneck"}={}){return!!this._states.remove(this.options.id)&&(this.rejectOnDrop&&this._reject(null!=t?t:new a(e)),this.Events.trigger("dropped",{args:this.args,options:this.options,task:this.task,promise:this.promise}),!0);}_assertStatus(t){var e;if(!((e=this._states.jobStatus(this.options.id))===t||"DONE"===t&&null===e))throw new a(`Invalid job status ${e}, expected ${t}. Please open an issue at https://github.com/SGrondin/bottleneck/issues`);}doReceive(){return this._states.start(this.options.id),this.Events.trigger("received",{args:this.args,options:this.options});}doQueue(t,e){return this._assertStatus("RECEIVED"),this._states.next(this.options.id),this.Events.trigger("queued",{args:this.args,options:this.options,reachedHWM:t,blocked:e});}doRun(){return 0===this.retryCount?(this._assertStatus("QUEUED"),this._states.next(this.options.id)):this._assertStatus("EXECUTING"),this.Events.trigger("scheduled",{args:this.args,options:this.options});}async doExecute(t,e,s,i){var r,n;0===this.retryCount?(this._assertStatus("RUNNING"),this._states.next(this.options.id)):this._assertStatus("EXECUTING"),r={args:this.args,options:this.options,retryCount:this.retryCount},this.Events.trigger("executing",r);try{if(n=await (null!=t?t.schedule(this.options,this.task,...this.args):this.task(...this.args)),e())return this.doDone(r),await i(this.options,r),this._assertStatus("DONE"),this._resolve(n);}catch(t){return this._onFailure(t,r,e,s,i);}}doExpire(t,e,s){var i,r;return this._states.jobStatus("RUNNING"===this.options.id)&&this._states.next(this.options.id),this._assertStatus("EXECUTING"),r={args:this.args,options:this.options,retryCount:this.retryCount},i=new a(`This job timed out after ${this.options.expiration} ms.`),this._onFailure(i,r,t,e,s);}async _onFailure(t,e,s,i,r){var n,o;if(s())return null!=(n=await this.Events.trigger("failed",t,e))?(o=~~n,this.Events.trigger("retry",`Retrying ${this.options.id} after ${o} ms`,e),this.retryCount++,i(o)):(this.doDone(e),await r(this.options,e),this._assertStatus("DONE"),this._reject(t));}doDone(t){return this._assertStatus("EXECUTING"),this._states.next(this.options.id),this.Events.trigger("done",t);}},c=class{constructor(t,s,i){this.instance=t,this.storeOptions=s,this.clientId=this.instance._randomIndex(),e.load(i,i,this),this._nextRequest=this._lastReservoirRefresh=this._lastReservoirIncrease=Date.now(),this._running=0,this._done=0,this._unblockTime=0,this.ready=this.Promise.resolve(),this.clients={},this._startHeartbeat();}_startHeartbeat(){var t;return null==this.heartbeat&&(null!=this.storeOptions.reservoirRefreshInterval&&null!=this.storeOptions.reservoirRefreshAmount||null!=this.storeOptions.reservoirIncreaseInterval&&null!=this.storeOptions.reservoirIncreaseAmount)?"function"==typeof(t=this.heartbeat=setInterval(()=>{var t,e,s,i,r;if(i=Date.now(),null!=this.storeOptions.reservoirRefreshInterval&&i>=this._lastReservoirRefresh+this.storeOptions.reservoirRefreshInterval&&(this._lastReservoirRefresh=i,this.storeOptions.reservoir=this.storeOptions.reservoirRefreshAmount,this.instance._drainAll(this.computeCapacity())),null!=this.storeOptions.reservoirIncreaseInterval&&i>=this._lastReservoirIncrease+this.storeOptions.reservoirIncreaseInterval&&({reservoirIncreaseAmount:t,reservoirIncreaseMaximum:s,reservoir:r}=this.storeOptions,this._lastReservoirIncrease=i,(e=null!=s?Math.min(t,s-r):t)>0))return this.storeOptions.reservoir+=e,this.instance._drainAll(this.computeCapacity());},this.heartbeatInterval)).unref?t.unref():void 0:clearInterval(this.heartbeat);}async __publish__(t){return await this.yieldLoop(),this.instance.Events.trigger("message",t.toString());}async __disconnect__(t){return await this.yieldLoop(),clearInterval(this.heartbeat),this.Promise.resolve();}yieldLoop(t=0){return new this.Promise(function(e,s){return setTimeout(e,t);});}computePenalty(){var t;return null!=(t=this.storeOptions.penalty)?t:15*this.storeOptions.minTime||5e3;}async __updateSettings__(t){return await this.yieldLoop(),e.overwrite(t,t,this.storeOptions),this._startHeartbeat(),this.instance._drainAll(this.computeCapacity()),!0;}async __running__(){return await this.yieldLoop(),this._running;}async __queued__(){return await this.yieldLoop(),this.instance.queued();}async __done__(){return await this.yieldLoop(),this._done;}async __groupCheck__(t){return await this.yieldLoop(),this._nextRequest+this.timeout<t;}computeCapacity(){var t,e;return({maxConcurrent:t,reservoir:e}=this.storeOptions,null!=t&&null!=e)?Math.min(t-this._running,e):null!=t?t-this._running:null!=e?e:null;}conditionsCheck(t){var e;return null==(e=this.computeCapacity())||t<=e;}async __incrementReservoir__(t){var e;return await this.yieldLoop(),e=this.storeOptions.reservoir+=t,this.instance._drainAll(this.computeCapacity()),e;}async __currentReservoir__(){return await this.yieldLoop(),this.storeOptions.reservoir;}isBlocked(t){return this._unblockTime>=t;}check(t,e){return this.conditionsCheck(t)&&this._nextRequest-e<=0;}async __check__(t){var e;return await this.yieldLoop(),e=Date.now(),this.check(t,e);}async __register__(t,e,s){var i,r;return(await this.yieldLoop(),i=Date.now(),this.conditionsCheck(e))?(this._running+=e,null!=this.storeOptions.reservoir&&(this.storeOptions.reservoir-=e),r=Math.max(this._nextRequest-i,0),this._nextRequest=i+r+this.storeOptions.minTime,{success:!0,wait:r,reservoir:this.storeOptions.reservoir}):{success:!1};}strategyIsBlock(){return 3===this.storeOptions.strategy;}async __submit__(t,e){var s,i,r;if(await this.yieldLoop(),null!=this.storeOptions.maxConcurrent&&e>this.storeOptions.maxConcurrent)throw new a(`Impossible to add a job having a weight of ${e} to a limiter having a maxConcurrent setting of ${this.storeOptions.maxConcurrent}`);return i=Date.now(),r=null!=this.storeOptions.highWater&&t===this.storeOptions.highWater&&!this.check(e,i),(s=this.strategyIsBlock()&&(r||this.isBlocked(i)))&&(this._unblockTime=i+this.computePenalty(),this._nextRequest=this._unblockTime+this.storeOptions.minTime,this.instance._dropAllQueued()),{reachedHWM:r,blocked:s,strategy:this.storeOptions.strategy};}async __free__(t,e){return await this.yieldLoop(),this._running-=e,this._done+=e,this.instance._drainAll(this.computeCapacity()),{running:this._running};}},_=class{constructor(t){this.status=t,this._jobs={},this.counts=this.status.map(function(){return 0;});}next(t){var e,s;return(s=(e=this._jobs[t])+1,null!=e&&s<this.status.length)?(this.counts[e]--,this.counts[s]++,this._jobs[t]++):null!=e?(this.counts[e]--,delete this._jobs[t]):void 0;}start(t){return this._jobs[t]=0,this.counts[0]++;}remove(t){var e;return null!=(e=this._jobs[t])&&(this.counts[e]--,delete this._jobs[t]),null!=e;}jobStatus(t){var e;return null!=(e=this.status[this._jobs[t]])?e:null;}statusJobs(t){var e,s,i,r;if(null==t)return Object.keys(this._jobs);if((s=this.status.indexOf(t))<0)throw new a(`status must be one of ${this.status.join(", ")}`);for(e in i=this._jobs,r=[],i)i[e]===s&&r.push(e);return r;}statusCounts(){return this.counts.reduce((t,e,s)=>(t[this.status[s]]=e,t),{});}},d=class{constructor(t,e){this.schedule=this.schedule.bind(this),this.name=t,this.Promise=e,this._running=0,this._queue=new o;}isEmpty(){return 0===this._queue.length;}async _tryToRun(){var t,e,s,i,r,n;if(this._running<1&&this._queue.length>0)return this._running++,{task:n,args:t,resolve:i,reject:s}=this._queue.shift(),e=await async function(){try{return r=await n(...t),function(){return i(r);};}catch(t){return function(){return s(t);};}}(),this._running--,this._tryToRun(),e();}schedule(t,...e){var s,i,r;return r=i=null,s=new this.Promise(function(t,e){return r=t,i=e;}),this._queue.push({task:t,args:e,resolve:r,reject:i}),this._tryToRun(),s;}};var s="2.19.5",i=Object.freeze({version:s,default:{version:s}}),r=()=>console.log("You must import the full version of Bottleneck in order to use this feature."),n=()=>console.log("You must import the full version of Bottleneck in order to use this feature.");v=()=>console.log("You must import the full version of Bottleneck in order to use this feature."),p=(function(){class t{constructor(t={}){this.deleteKey=this.deleteKey.bind(this),this.limiterOptions=t,e.load(this.limiterOptions,this.defaults,this),this.Events=new h(this),this.instances={},this.Bottleneck=b,this._startAutoCleanup(),this.sharedConnection=null!=this.connection,null==this.connection&&("redis"===this.limiterOptions.datastore?this.connection=new r(Object.assign({},this.limiterOptions,{Events:this.Events})):"ioredis"===this.limiterOptions.datastore&&(this.connection=new n(Object.assign({},this.limiterOptions,{Events:this.Events}))));}key(t=""){var e;return null!=(e=this.instances[t])?e:(()=>{var e;return e=this.instances[t]=new this.Bottleneck(Object.assign(this.limiterOptions,{id:`${this.id}-${t}`,timeout:this.timeout,connection:this.connection})),this.Events.trigger("created",e,t),e;})();}async deleteKey(t=""){var e,s;return s=this.instances[t],this.connection&&(e=await this.connection.__runCommand__(["del",...v.allKeys(`${this.id}-${t}`)])),null!=s&&(delete this.instances[t],await s.disconnect()),null!=s||e>0;}limiters(){var t,e,s,i;for(t in e=this.instances,s=[],e)i=e[t],s.push({key:t,limiter:i});return s;}keys(){return Object.keys(this.instances);}async clusterKeys(){var t,e,s,i,r,n,o,h;if(null==this.connection)return this.Promise.resolve(this.keys());for(r=[],t=null,h=`b_${this.id}-`.length;0!==t;)for(s=0,[o,e]=await this.connection.__runCommand__(["scan",null!=t?t:0,"match",`b_${this.id}-*_settings`,"count",1e4]),t=~~o,n=e.length;s<n;s++)i=e[s],r.push(i.slice(h,-9));return r;}_startAutoCleanup(){var t;return clearInterval(this.interval),"function"==typeof(t=this.interval=setInterval(async()=>{var t,e,s,i,r;for(t in i=Date.now(),e=this.instances,s=[],e){r=e[t];try{await r._store.__groupCheck__(i)?s.push(this.deleteKey(t)):s.push(void 0);}catch(t){s.push(r.Events.trigger("error",t));}}return s;},this.timeout/2)).unref?t.unref():void 0;}updateSettings(t={}){if(e.overwrite(t,this.defaults,this),e.overwrite(t,t,this.limiterOptions),null!=t.timeout)return this._startAutoCleanup();}disconnect(t=!0){var e;if(!this.sharedConnection)return null!=(e=this.connection)?e.disconnect(t):void 0;}}return t.prototype.defaults={timeout:3e5,connection:null,Promise:Promise,id:"group-key"},t;}).call(t),f=(function(){class t{constructor(t={}){this.options=t,e.load(this.options,this.defaults,this),this.Events=new h(this),this._arr=[],this._resetPromise(),this._lastFlush=Date.now();}_resetPromise(){return this._promise=new this.Promise((t,e)=>this._resolve=t);}_flush(){return clearTimeout(this._timeout),this._lastFlush=Date.now(),this._resolve(),this.Events.trigger("batch",this._arr),this._arr=[],this._resetPromise();}add(t){var e;return this._arr.push(t),e=this._promise,this._arr.length===this.maxSize?this._flush():null!=this.maxTime&&1===this._arr.length&&(this._timeout=setTimeout(()=>this._flush(),this.maxTime)),e;}}return t.prototype.defaults={maxTime:null,maxSize:null,Promise:Promise},t;}).call(t);var o,h,u,a,l,c,_,d,p,v,f,g,m=i&&i.default||i,y=[].splice;g=()=>console.log("You must import the full version of Bottleneck in order to use this feature.");var b=(function(){class t{constructor(s={},...i){var r;this._addToQueue=this._addToQueue.bind(this),this._validateOptions(s,i),e.load(s,this.instanceDefaults,this),this._queues=new u(10),this._scheduled={},this._states=new _(["RECEIVED","QUEUED","RUNNING","EXECUTING"].concat(this.trackDoneStatus?["DONE"]:[])),this._limiter=null,this.Events=new h(this),this._submitLock=new d("submit",this.Promise),this._registerLock=new d("register",this.Promise),r=e.load(s,this.storeDefaults,{}),this._store=(function(){if("redis"===this.datastore||"ioredis"===this.datastore||null!=this.connection)return new g(this,r,e.load(s,this.redisStoreDefaults,{}));if("local"===this.datastore)return new c(this,r,e.load(s,this.localStoreDefaults,{}));throw new t.prototype.BottleneckError(`Invalid datastore type: ${this.datastore}`);}).call(this),this._queues.on("leftzero",()=>{var t;return null!=(t=this._store.heartbeat)&&"function"==typeof t.ref?t.ref():void 0;}),this._queues.on("zero",()=>{var t;return null!=(t=this._store.heartbeat)&&"function"==typeof t.unref?t.unref():void 0;});}_validateOptions(e,s){if(!(null!=e&&"object"==typeof e&&0===s.length))throw new t.prototype.BottleneckError("Bottleneck v2 takes a single object argument. Refer to https://github.com/SGrondin/bottleneck#upgrading-to-v2 if you're upgrading from Bottleneck v1.");}ready(){return this._store.ready;}clients(){return this._store.clients;}channel(){return`b_${this.id}`;}channel_client(){return`b_${this.id}_${this._store.clientId}`;}publish(t){return this._store.__publish__(t);}disconnect(t=!0){return this._store.__disconnect__(t);}chain(t){return this._limiter=t,this;}queued(t){return this._queues.queued(t);}clusterQueued(){return this._store.__queued__();}empty(){return 0===this.queued()&&this._submitLock.isEmpty();}running(){return this._store.__running__();}done(){return this._store.__done__();}jobStatus(t){return this._states.jobStatus(t);}jobs(t){return this._states.statusJobs(t);}counts(){return this._states.statusCounts();}_randomIndex(){return Math.random().toString(36).slice(2);}check(t=1){return this._store.__check__(t);}_clearGlobalState(t){return null!=this._scheduled[t]&&(clearTimeout(this._scheduled[t].expiration),delete this._scheduled[t],!0);}async _free(t,e,s,i){var r;try{if({running:r}=await this._store.__free__(t,s.weight),this.Events.trigger("debug",`Freed ${s.id}`,i),0===r&&this.empty())return this.Events.trigger("idle");}catch(t){return this.Events.trigger("error",t);}}_run(t,e,s){var i,r,n;return e.doRun(),i=this._clearGlobalState.bind(this,t),n=this._run.bind(this,t,e),r=this._free.bind(this,t,e),this._scheduled[t]={timeout:setTimeout(()=>e.doExecute(this._limiter,i,n,r),s),expiration:null!=e.options.expiration?setTimeout(function(){return e.doExpire(i,n,r);},s+e.options.expiration):void 0,job:e};}_drainOne(t){return this._registerLock.schedule(()=>{var e,s,i,r,n;return 0===this.queued()?this.Promise.resolve(null):(n=this._queues.getFirst(),{options:r,args:e}=i=n.first(),null!=t&&r.weight>t)?this.Promise.resolve(null):(this.Events.trigger("debug",`Draining ${r.id}`,{args:e,options:r}),s=this._randomIndex(),this._store.__register__(s,r.weight,r.expiration).then(({success:t,wait:o,reservoir:h})=>{var u;return(this.Events.trigger("debug",`Drained ${r.id}`,{success:t,args:e,options:r}),t)?(n.shift(),(u=this.empty())&&this.Events.trigger("empty"),0===h&&this.Events.trigger("depleted",u),this._run(s,i,o),this.Promise.resolve(r.weight)):this.Promise.resolve(null);}));});}_drainAll(t,e=0){return this._drainOne(t).then(s=>{var i;return null!=s?(i=null!=t?t-s:t,this._drainAll(i,e+s)):this.Promise.resolve(e);}).catch(t=>this.Events.trigger("error",t));}_dropAllQueued(t){return this._queues.shiftAll(function(e){return e.doDrop({message:t});});}stop(s={}){var i,r;return s=e.load(s,this.stopDefaults),r=t=>{var e;return e=()=>{var e;return(e=this._states.counts)[0]+e[1]+e[2]+e[3]===t;},new this.Promise((t,s)=>e()?t():this.on("done",()=>{if(e())return this.removeAllListeners("done"),t();}));},i=s.dropWaitingJobs?(this._run=function(t,e){return e.doDrop({message:s.dropErrorMessage});},this._drainOne=()=>this.Promise.resolve(null),this._registerLock.schedule(()=>this._submitLock.schedule(()=>{var t,e,i;for(t in e=this._scheduled)i=e[t],"RUNNING"===this.jobStatus(i.job.options.id)&&(clearTimeout(i.timeout),clearTimeout(i.expiration),i.job.doDrop({message:s.dropErrorMessage}));return this._dropAllQueued(s.dropErrorMessage),r(0);}))):this.schedule({priority:9,weight:0},()=>r(1)),this._receive=function(e){return e._reject(new t.prototype.BottleneckError(s.enqueueErrorMessage));},this.stop=()=>this.Promise.reject(new t.prototype.BottleneckError("stop() has already been called")),i;}async _addToQueue(e){var s,i,r,n,o,h;({args:s,options:r}=e);try{({reachedHWM:n,blocked:i,strategy:h}=await this._store.__submit__(this.queued(),r.weight));}catch(t){return this.Events.trigger("debug",`Could not queue ${r.id}`,{args:s,options:r,error:t}),e.doDrop({error:t}),!1;}return i?(e.doDrop(),!0):(n&&(null!=(o=h===t.prototype.strategy.LEAK?this._queues.shiftLastFrom(r.priority):h===t.prototype.strategy.OVERFLOW_PRIORITY?this._queues.shiftLastFrom(r.priority+1):h===t.prototype.strategy.OVERFLOW?e:void 0)&&o.doDrop(),null==o||h===t.prototype.strategy.OVERFLOW)?null==o&&e.doDrop():(e.doQueue(n,i),this._queues.push(e),await this._drainAll()),n);}_receive(e){return null!=this._states.jobStatus(e.options.id)?(e._reject(new t.prototype.BottleneckError(`A job with the same id already exists (id=${e.options.id})`)),!1):(e.doReceive(),this._submitLock.schedule(this._addToQueue,e));}submit(...t){var s,i,r,n,o,h;return"function"==typeof t[0]?(o=t,[i,...t]=o,[s]=y.call(t,-1),n=e.load({},this.jobDefaults)):(h=t,[n,i,...t]=h,[s]=y.call(t,-1),n=e.load(n,this.jobDefaults)),(r=new l((...t)=>new this.Promise(function(e,s){return i(...t,function(...t){return(null!=t[0]?s:e)(t);});}),t,n,this.jobDefaults,this.rejectOnDrop,this.Events,this._states,this.Promise)).promise.then(function(t){return"function"==typeof s?s(...t):void 0;}).catch(function(t){return Array.isArray(t)?"function"==typeof s?s(...t):void 0:"function"==typeof s?s(t):void 0;}),this._receive(r);}schedule(...t){var e,s,i;return"function"==typeof t[0]?([i,...t]=t,s={}):[s,i,...t]=t,e=new l(i,t,s,this.jobDefaults,this.rejectOnDrop,this.Events,this._states,this.Promise),this._receive(e),e.promise;}wrap(t){var e,s;return e=this.schedule.bind(this),(s=function(...s){return e(t.bind(this),...s);}).withOptions=function(s,...i){return e(s,t,...i);},s;}async updateSettings(t={}){return await this._store.__updateSettings__(e.overwrite(t,this.storeDefaults)),e.overwrite(t,this.instanceDefaults,this),this;}currentReservoir(){return this._store.__currentReservoir__();}incrementReservoir(t=0){return this._store.__incrementReservoir__(t);}}return t.default=t,t.Events=h,t.version=t.prototype.version=m.version,t.strategy=t.prototype.strategy={LEAK:1,OVERFLOW:2,OVERFLOW_PRIORITY:4,BLOCK:3},t.BottleneckError=t.prototype.BottleneckError=a,t.Group=t.prototype.Group=p,t.RedisConnection=t.prototype.RedisConnection=r,t.IORedisConnection=t.prototype.IORedisConnection=n,t.Batcher=t.prototype.Batcher=f,t.prototype.jobDefaults={priority:5,weight:1,expiration:null,id:"<no-id>"},t.prototype.storeDefaults={maxConcurrent:null,minTime:0,highWater:null,strategy:t.prototype.strategy.LEAK,penalty:null,reservoir:null,reservoirRefreshInterval:null,reservoirRefreshAmount:null,reservoirIncreaseInterval:null,reservoirIncreaseAmount:null,reservoirIncreaseMaximum:null},t.prototype.localStoreDefaults={Promise:Promise,timeout:null,heartbeatInterval:250},t.prototype.redisStoreDefaults={Promise:Promise,timeout:null,heartbeatInterval:5e3,clientTimeout:1e4,Redis:null,clientOptions:{},clusterNodes:null,clearDatastore:!1,connection:null},t.prototype.instanceDefaults={datastore:"local",connection:null,id:"<no-id>",rejectOnDrop:!0,trackDoneStatus:!1,Promise:Promise},t.prototype.stopDefaults={enqueueErrorMessage:"This limiter has been stopped and cannot accept new jobs.",dropWaitingJobs:!0,dropErrorMessage:"This limiter has been stopped."},t;}).call(t);return b;},"object"==typeof e&&void 0!==t?t.exports=r():"function"==typeof define&&define.amd?define(r):this.Bottleneck=r();},"b17a2847":function e(e,t,n,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n];}});}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n];}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n);};Object.defineProperty(t,"__esModule",{value:!0}),t.TwirpContentType=void 0,o(n("621d18e2",!0),t),o(n("f7c160d5",!0),t),o(n("e90a9b6e",!0),t),o(n("5bc3336c",!0),t),o(n("4796dc9d",!0),t),o(n("61b7b39e",!0),t),o(n("34aa5a3e",!0),t);var c=n("026b7588",!0);Object.defineProperty(t,"TwirpContentType",{enumerable:!0,get:function(){return c.TwirpContentType;}});},"c2d81037":function t(t,e,r,o){"use strict";var s=this&&this.__createBinding||(Object.create?function(t,e,r,o){void 0===o&&(o=r),Object.defineProperty(t,o,{enumerable:!0,get:function(){return e[r];}});}:function(t,e,r,o){void 0===o&&(o=r),t[o]=e[r];}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e});}:function(t,e){t.default=e;}),u=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.hasOwnProperty.call(t,r)&&s(e,t,r);return a(e,t),e;},n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t};};Object.defineProperty(e,"__esModule",{value:!0}),e.safeTrimTrailingSeparator=e.normalizeSeparators=e.hasRoot=e.hasAbsoluteRoot=e.ensureAbsoluteRoot=e.dirname=void 0;let i=u(globalThis.nodeRequire("path")),l=n(globalThis.nodeRequire("assert")),c="win32"===process.platform;function f(t){return(l.default(t,"hasAbsoluteRoot parameter 'itemPath' must not be empty"),t=d(t),c)?t.startsWith("\\\\")||/^[A-Z]:\\/i.test(t):t.startsWith("/");}function d(t){return(t=t||"",c)?(t=t.replace(/\//g,"\\"),(/^\\\\+[^\\]/.test(t)?"\\":"")+t.replace(/\\\\+/g,"\\")):t.replace(/\/\/+/g,"/");}function h(t){return t?!(t=d(t)).endsWith(i.sep)||t===i.sep||c&&/^[A-Z]:\\$/i.test(t)?t:t.substr(0,t.length-1):"";}e.dirname=function(t){if(t=h(t),c&&/^\\\\[^\\]+(\\[^\\]+)?$/.test(t))return t;let e=i.dirname(t);return c&&/^\\\\[^\\]+\\[^\\]+\\$/.test(e)&&(e=h(e)),e;},e.ensureAbsoluteRoot=function(t,e){if(l.default(t,"ensureAbsoluteRoot parameter 'root' must not be empty"),l.default(e,"ensureAbsoluteRoot parameter 'itemPath' must not be empty"),f(e))return e;if(c){if(e.match(/^[A-Z]:[^\\/]|^[A-Z]:$/i)){let t=process.cwd();return(l.default(t.match(/^[A-Z]:\\/i),`Expected current directory to start with an absolute drive root. Actual '${t}'`),e[0].toUpperCase()!==t[0].toUpperCase())?`${e[0]}:\\${e.substr(2)}`:2===e.length?`${e[0]}:\\${t.substr(3)}`:(t.endsWith("\\")||(t+="\\"),`${e[0]}:\\${t.substr(3)}${e.substr(2)}`);}if(d(e).match(/^\\$|^\\[^\\]/)){let t=process.cwd();return l.default(t.match(/^[A-Z]:\\/i),`Expected current directory to start with an absolute drive root. Actual '${t}'`),`${t[0]}:\\${e.substr(1)}`;}}return l.default(f(t),"ensureAbsoluteRoot parameter 'root' must have an absolute root"),t.endsWith("/")||c&&t.endsWith("\\")||(t+=i.sep),t+e;},e.hasAbsoluteRoot=f,e.hasRoot=function(t){return(l.default(t,"isRooted parameter 'itemPath' must not be empty"),t=d(t),c)?t.startsWith("\\")||/^[A-Z]:/i.test(t):t.startsWith("/");},e.normalizeSeparators=d,e.safeTrimTrailingSeparator=h;},"c525ca30":function e(e,s,i,r){"use strict";s.URL=i("649dc14e",!0).interface,s.serializeURL=i("d50d64f6",!0).serializeURL,s.serializeURLOrigin=i("d50d64f6",!0).serializeURLOrigin,s.basicURLParse=i("d50d64f6",!0).basicURLParse,s.setTheUsername=i("d50d64f6",!0).setTheUsername,s.setThePassword=i("d50d64f6",!0).setThePassword,s.serializeHost=i("d50d64f6",!0).serializeHost,s.serializeInteger=i("d50d64f6",!0).serializeInteger,s.parseURL=i("d50d64f6",!0).parseURL;},"d50d64f6":function t(t,e,s,r){"use strict";let i=globalThis.nodeRequire("punycode",!0),h=s("11b4522e",!0),u={ftp:21,file:null,gopher:70,http:80,https:443,ws:80,wss:443},n=Symbol("failure");function a(t){return i.ucs2.decode(t).length;}function o(t,e){let s=t[e];return isNaN(s)?void 0:String.fromCodePoint(s);}function l(t){return t>=48&&t<=57;}function p(t){return t>=65&&t<=90||t>=97&&t<=122;}function f(t){return l(t)||t>=65&&t<=70||t>=97&&t<=102;}function c(t){return"."===t||"%2e"===t.toLowerCase();}function b(t){return 2===t.length&&p(t.codePointAt(0))&&(":"===t[1]||"|"===t[1]);}function g(t){return void 0!==u[t];}function d(t){return g(t.scheme);}function m(t){let e=t.toString(16).toUpperCase();return 1===e.length&&(e="0"+e),"%"+e;}function y(t){return t<=31||t>126;}let v=new Set([32,34,35,60,62,63,96,123,125]);function w(t){return y(t)||v.has(t);}let E=new Set([47,58,59,61,64,91,92,93,94,124]);function N(t){return w(t)||E.has(t);}function O(t,e){let s=String.fromCodePoint(t);return e(t)?function(t){let e=new Buffer(t),s="";for(let t=0;t<e.length;++t)s+=m(e[t]);return s;}(s):s;}function q(t,e){if("["===t[0])return"]"!==t[t.length-1]?n:function(t){let e=[0,0,0,0,0,0,0,0],s=0,r=null,h=0;if(58===(t=i.ucs2.decode(t))[h]){if(58!==t[h+1])return n;h+=2,r=++s;}for(;h<t.length;){if(8===s)return n;if(58===t[h]){if(null!==r)return n;++h,r=++s;continue;}let i=0,u=0;for(;u<4&&f(t[h]);)i=16*i+parseInt(o(t,h),16),++h,++u;if(46===t[h]){if(0===u||(h-=u,s>6))return n;let r=0;for(;void 0!==t[h];){let i=null;if(r>0){if(46!==t[h]||!(r<4))return n;++h;}if(!l(t[h]))return n;for(;l(t[h]);){let e=parseInt(o(t,h));if(null===i)i=e;else{if(0===i)return n;i=10*i+e;}if(i>255)return n;++h;}e[s]=256*e[s]+i,(2==++r||4===r)&&++s;}if(4!==r)return n;break;}if(58===t[h]){if(void 0===t[++h])return n;}else if(void 0!==t[h])return n;e[s]=i,++s;}if(null!==r){let t=s-r;for(s=7;0!==s&&t>0;){let i=e[r+t-1];e[r+t-1]=e[s],e[s]=i,--s,--t;}}else if(null===r&&8!==s)return n;return e;}(t.substring(1,t.length-1));if(!e)return function(t){if(-1!==t.search(/\u0000|\u0009|\u000A|\u000D|\u0020|#|\/|:|\?|@|\[|\\|\]/))return n;let e="",s=i.ucs2.decode(t);for(let t=0;t<s.length;++t)e+=O(s[t],y);return e;}(t);let s=function(t){let e=new Buffer(t),s=[];for(let t=0;t<e.length;++t)37!==e[t]?s.push(e[t]):37===e[t]&&f(e[t+1])&&f(e[t+2])?(s.push(parseInt(e.slice(t+1,t+3).toString(),16)),t+=2):s.push(e[t]);return new Buffer(s).toString();}(t),r=h.toASCII(s,!1,h.PROCESSING_OPTIONS.NONTRANSITIONAL,!1);if(null===r||-1!==r.search(/\u0000|\u0009|\u000A|\u000D|\u0020|#|%|\/|:|\?|@|\[|\\|\]/))return n;let u=function(t){let e=t.split(".");if(""===e[e.length-1]&&e.length>1&&e.pop(),e.length>4)return t;let s=[];for(let r of e){if(""===r)return t;let e=function(t){let e=10;return(t.length>=2&&"0"===t.charAt(0)&&"x"===t.charAt(1).toLowerCase()?(t=t.substring(2),e=16):t.length>=2&&"0"===t.charAt(0)&&(t=t.substring(1),e=8),""===t)?0:(10===e?/[^0-9]/:16===e?/[^0-9A-Fa-f]/:/[^0-7]/).test(t)?n:parseInt(t,e);}(r);if(e===n)return t;s.push(e);}for(let t=0;t<s.length-1;++t)if(s[t]>255)return n;if(s[s.length-1]>=Math.pow(256,5-s.length))return n;let r=s.pop(),i=0;for(let t of s)r+=t*Math.pow(256,3-i),++i;return r;}(r);return"number"==typeof u||u===n?u:r;}function L(t){return"number"==typeof t?function(t){let e="",s=t;for(let t=1;t<=4;++t)e=String(s%256)+e,4!==t&&(e="."+e),s=Math.floor(s/256);return e;}(t):t instanceof Array?"["+function(t){let e="",s=function(t){let e=null,s=1,r=null,i=0;for(let h=0;h<t.length;++h)0!==t[h]?(i>s&&(e=r,s=i),r=null,i=0):(null===r&&(r=h),++i);return i>s&&(e=r,s=i),{idx:e,len:s};}(t).idx,r=!1;for(let i=0;i<=7;++i)if(!r||0!==t[i]){if(r&&(r=!1),s===i){e+=0===i?"::":":",r=!0;continue;}e+=t[i].toString(16),7!==i&&(e+=":");}return e;}(t)+"]":t;}function A(t){var e;let s=t.path;!(0===s.length||"file"===t.scheme&&1===s.length&&(e=s[0],/^[A-Za-z]:$/.test(e)))&&s.pop();}function S(t){return""!==t.username||""!==t.password;}function R(t,e,s,r,h){if(this.pointer=0,this.input=t,this.base=e||null,this.encodingOverride=s||"utf-8",this.stateOverride=h,this.url=r,this.failure=!1,this.parseError=!1,!this.url){this.url={scheme:"",username:"",password:"",host:null,port:null,path:[],query:null,fragment:null,cannotBeABaseURL:!1};let t=this.input.replace(/^[\u0000-\u001F\u0020]+|[\u0000-\u001F\u0020]+$/g,"");t!==this.input&&(this.parseError=!0),this.input=t;}let u=this.input.replace(/\u0009|\u000A|\u000D/g,"");for(u!==this.input&&(this.parseError=!0),this.input=u,this.state=h||"scheme start",this.buffer="",this.atFlag=!1,this.arrFlag=!1,this.passwordTokenSeenFlag=!1,this.input=i.ucs2.decode(this.input);this.pointer<=this.input.length;++this.pointer){let t=this.input[this.pointer],e=isNaN(t)?void 0:String.fromCodePoint(t),s=this["parse "+this.state](t,e);if(s){if(s===n){this.failure=!0;break;}}else break;}}R.prototype["parse scheme start"]=function(t,e){if(p(t))this.buffer+=e.toLowerCase(),this.state="scheme";else{if(this.stateOverride)return this.parseError=!0,n;this.state="no scheme",--this.pointer;}return!0;},R.prototype["parse scheme"]=function(t,e){if(p(t)||l(t)||43===t||45===t||46===t)this.buffer+=e.toLowerCase();else if(58===t){if(this.stateOverride&&(d(this.url)&&!g(this.buffer)||!d(this.url)&&g(this.buffer)||(S(this.url)||null!==this.url.port)&&"file"===this.buffer||"file"===this.url.scheme&&(""===this.url.host||null===this.url.host))||(this.url.scheme=this.buffer,this.buffer="",this.stateOverride))return!1;"file"===this.url.scheme?((47!==this.input[this.pointer+1]||47!==this.input[this.pointer+2])&&(this.parseError=!0),this.state="file"):d(this.url)&&null!==this.base&&this.base.scheme===this.url.scheme?this.state="special relative or authority":d(this.url)?this.state="special authority slashes":47===this.input[this.pointer+1]?(this.state="path or authority",++this.pointer):(this.url.cannotBeABaseURL=!0,this.url.path.push(""),this.state="cannot-be-a-base-URL path");}else{if(this.stateOverride)return this.parseError=!0,n;this.buffer="",this.state="no scheme",this.pointer=-1;}return!0;},R.prototype["parse no scheme"]=function(t){return null===this.base||this.base.cannotBeABaseURL&&35!==t?n:(this.base.cannotBeABaseURL&&35===t?(this.url.scheme=this.base.scheme,this.url.path=this.base.path.slice(),this.url.query=this.base.query,this.url.fragment="",this.url.cannotBeABaseURL=!0,this.state="fragment"):("file"===this.base.scheme?this.state="file":this.state="relative",--this.pointer),!0);},R.prototype["parse special relative or authority"]=function(t){return 47===t&&47===this.input[this.pointer+1]?(this.state="special authority ignore slashes",++this.pointer):(this.parseError=!0,this.state="relative",--this.pointer),!0;},R.prototype["parse path or authority"]=function(t){return 47===t?this.state="authority":(this.state="path",--this.pointer),!0;},R.prototype["parse relative"]=function(t){return this.url.scheme=this.base.scheme,isNaN(t)?(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.url.path=this.base.path.slice(),this.url.query=this.base.query):47===t?this.state="relative slash":63===t?(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.url.path=this.base.path.slice(),this.url.query="",this.state="query"):35===t?(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.url.path=this.base.path.slice(),this.url.query=this.base.query,this.url.fragment="",this.state="fragment"):d(this.url)&&92===t?(this.parseError=!0,this.state="relative slash"):(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.url.path=this.base.path.slice(0,this.base.path.length-1),this.state="path",--this.pointer),!0;},R.prototype["parse relative slash"]=function(t){return d(this.url)&&(47===t||92===t)?(92===t&&(this.parseError=!0),this.state="special authority ignore slashes"):47===t?this.state="authority":(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.state="path",--this.pointer),!0;},R.prototype["parse special authority slashes"]=function(t){return 47===t&&47===this.input[this.pointer+1]?(this.state="special authority ignore slashes",++this.pointer):(this.parseError=!0,this.state="special authority ignore slashes",--this.pointer),!0;},R.prototype["parse special authority ignore slashes"]=function(t){return 47!==t&&92!==t?(this.state="authority",--this.pointer):this.parseError=!0,!0;},R.prototype["parse authority"]=function(t,e){if(64===t){this.parseError=!0,this.atFlag&&(this.buffer="%40"+this.buffer),this.atFlag=!0;let t=a(this.buffer);for(let e=0;e<t;++e){let t=this.buffer.codePointAt(e);if(58===t&&!this.passwordTokenSeenFlag){this.passwordTokenSeenFlag=!0;continue;}let s=O(t,N);this.passwordTokenSeenFlag?this.url.password+=s:this.url.username+=s;}this.buffer="";}else if(isNaN(t)||47===t||63===t||35===t||d(this.url)&&92===t){if(this.atFlag&&""===this.buffer)return this.parseError=!0,n;this.pointer-=a(this.buffer)+1,this.buffer="",this.state="host";}else this.buffer+=e;return!0;},R.prototype["parse hostname"]=R.prototype["parse host"]=function(t,e){if(this.stateOverride&&"file"===this.url.scheme)--this.pointer,this.state="file host";else if(58!==t||this.arrFlag){if(isNaN(t)||47===t||63===t||35===t||d(this.url)&&92===t){if(--this.pointer,d(this.url)&&""===this.buffer)return this.parseError=!0,n;if(this.stateOverride&&""===this.buffer&&(S(this.url)||null!==this.url.port))return this.parseError=!0,!1;let t=q(this.buffer,d(this.url));if(t===n)return n;if(this.url.host=t,this.buffer="",this.state="path start",this.stateOverride)return!1;}else 91===t?this.arrFlag=!0:93===t&&(this.arrFlag=!1),this.buffer+=e;}else{if(""===this.buffer)return this.parseError=!0,n;let t=q(this.buffer,d(this.url));if(t===n)return n;if(this.url.host=t,this.buffer="",this.state="port","hostname"===this.stateOverride)return!1;}return!0;},R.prototype["parse port"]=function(t,e){if(l(t))this.buffer+=e;else{if(!(isNaN(t)||47===t||63===t||35===t||d(this.url)&&92===t)&&!this.stateOverride)return this.parseError=!0,n;if(""!==this.buffer){let t=parseInt(this.buffer);if(t>65535)return this.parseError=!0,n;this.url.port=t===u[this.url.scheme]?null:t,this.buffer="";}if(this.stateOverride)return!1;this.state="path start",--this.pointer;}return!0;};let U=new Set([47,92,63,35]);R.prototype["parse file"]=function(t){if(this.url.scheme="file",47===t||92===t)92===t&&(this.parseError=!0),this.state="file slash";else if(null!==this.base&&"file"===this.base.scheme){if(isNaN(t))this.url.host=this.base.host,this.url.path=this.base.path.slice(),this.url.query=this.base.query;else if(63===t)this.url.host=this.base.host,this.url.path=this.base.path.slice(),this.url.query="",this.state="query";else if(35===t)this.url.host=this.base.host,this.url.path=this.base.path.slice(),this.url.query=this.base.query,this.url.fragment="",this.state="fragment";else{var e;this.input.length-this.pointer-1!=0&&(e=this.input[this.pointer+1],p(t)&&(58===e||124===e))&&(!(this.input.length-this.pointer-1>=2)||U.has(this.input[this.pointer+2]))?this.parseError=!0:(this.url.host=this.base.host,this.url.path=this.base.path.slice(),A(this.url)),this.state="path",--this.pointer;}}else this.state="path",--this.pointer;return!0;},R.prototype["parse file slash"]=function(t){if(47===t||92===t)92===t&&(this.parseError=!0),this.state="file host";else{if(null!==this.base&&"file"===this.base.scheme){var e;2===(e=this.base.path[0]).length&&p(e.codePointAt(0))&&":"===e[1]?this.url.path.push(this.base.path[0]):this.url.host=this.base.host;}this.state="path",--this.pointer;}return!0;},R.prototype["parse file host"]=function(t,e){if(isNaN(t)||47===t||92===t||63===t||35===t){if(--this.pointer,!this.stateOverride&&b(this.buffer))this.parseError=!0,this.state="path";else if(""===this.buffer){if(this.url.host="",this.stateOverride)return!1;this.state="path start";}else{let t=q(this.buffer,d(this.url));if(t===n)return n;if("localhost"===t&&(t=""),this.url.host=t,this.stateOverride)return!1;this.buffer="",this.state="path start";}}else this.buffer+=e;return!0;},R.prototype["parse path start"]=function(t){return d(this.url)?(92===t&&(this.parseError=!0),this.state="path",47!==t&&92!==t&&--this.pointer):this.stateOverride||63!==t?this.stateOverride||35!==t?void 0!==t&&(this.state="path",47!==t&&--this.pointer):(this.url.fragment="",this.state="fragment"):(this.url.query="",this.state="query"),!0;},R.prototype["parse path"]=function(t){if(isNaN(t)||47===t||d(this.url)&&92===t||!this.stateOverride&&(63===t||35===t)){var e;if((d(this.url)&&92===t&&(this.parseError=!0),".."===(e=(e=this.buffer).toLowerCase())||"%2e."===e||".%2e"===e||"%2e%2e"===e)?(A(this.url),47===t||d(this.url)&&92===t||this.url.path.push("")):c(this.buffer)&&47!==t&&!(d(this.url)&&92===t)?this.url.path.push(""):c(this.buffer)||("file"===this.url.scheme&&0===this.url.path.length&&b(this.buffer)&&(""!==this.url.host&&null!==this.url.host&&(this.parseError=!0,this.url.host=""),this.buffer=this.buffer[0]+":"),this.url.path.push(this.buffer)),this.buffer="","file"===this.url.scheme&&(void 0===t||63===t||35===t))for(;this.url.path.length>1&&""===this.url.path[0];)this.parseError=!0,this.url.path.shift();63===t&&(this.url.query="",this.state="query"),35===t&&(this.url.fragment="",this.state="fragment");}else 37!==t||f(this.input[this.pointer+1])&&f(this.input[this.pointer+2])||(this.parseError=!0),this.buffer+=O(t,w);return!0;},R.prototype["parse cannot-be-a-base-URL path"]=function(t){return 63===t?(this.url.query="",this.state="query"):35===t?(this.url.fragment="",this.state="fragment"):(isNaN(t)||37===t||(this.parseError=!0),37!==t||f(this.input[this.pointer+1])&&f(this.input[this.pointer+2])||(this.parseError=!0),isNaN(t)||(this.url.path[0]=this.url.path[0]+O(t,y))),!0;},R.prototype["parse query"]=function(t,e){if(isNaN(t)||!this.stateOverride&&35===t){d(this.url)&&"ws"!==this.url.scheme&&"wss"!==this.url.scheme||(this.encodingOverride="utf-8");let e=new Buffer(this.buffer);for(let t=0;t<e.length;++t)e[t]<33||e[t]>126||34===e[t]||35===e[t]||60===e[t]||62===e[t]?this.url.query+=m(e[t]):this.url.query+=String.fromCodePoint(e[t]);this.buffer="",35===t&&(this.url.fragment="",this.state="fragment");}else 37!==t||f(this.input[this.pointer+1])&&f(this.input[this.pointer+2])||(this.parseError=!0),this.buffer+=e;return!0;},R.prototype["parse fragment"]=function(t){return isNaN(t)||(0===t?this.parseError=!0:(37!==t||f(this.input[this.pointer+1])&&f(this.input[this.pointer+2])||(this.parseError=!0),this.url.fragment+=O(t,y))),!0;},t.exports.serializeURL=function(t,e){let s=t.scheme+":";if(null!==t.host?(s+="//",(""!==t.username||""!==t.password)&&(s+=t.username,""!==t.password&&(s+=":"+t.password),s+="@"),s+=L(t.host),null!==t.port&&(s+=":"+t.port)):null===t.host&&"file"===t.scheme&&(s+="//"),t.cannotBeABaseURL)s+=t.path[0];else for(let e of t.path)s+="/"+e;return null!==t.query&&(s+="?"+t.query),e||null===t.fragment||(s+="#"+t.fragment),s;},t.exports.serializeURLOrigin=function(e){switch(e.scheme){case"blob":try{return t.exports.serializeURLOrigin(t.exports.parseURL(e.path[0]));}catch(t){return"null";}case"ftp":case"gopher":case"http":case"https":case"ws":case"wss":var s;let r;return r=(s={scheme:e.scheme,host:e.host,port:e.port}).scheme+"://"+L(s.host),null!==s.port&&(r+=":"+s.port),r;case"file":return"file://";default:return"null";}},t.exports.basicURLParse=function(t,e){void 0===e&&(e={});let s=new R(t,e.baseURL,e.encodingOverride,e.url,e.stateOverride);return s.failure?"failure":s.url;},t.exports.setTheUsername=function(t,e){t.username="";let s=i.ucs2.decode(e);for(let e=0;e<s.length;++e)t.username+=O(s[e],N);},t.exports.setThePassword=function(t,e){t.password="";let s=i.ucs2.decode(e);for(let e=0;e<s.length;++e)t.password+=O(s[e],N);},t.exports.serializeHost=L,t.exports.cannotHaveAUsernamePasswordPort=function(t){return null===t.host||""===t.host||t.cannotBeABaseURL||"file"===t.scheme;},t.exports.serializeInteger=function(t){return String(t);},t.exports.parseURL=function(e,s){return void 0===s&&(s={}),t.exports.basicURLParse(e,{baseURL:s.baseURL,encodingOverride:s.encodingOverride});};},"dc98b0e7":function e(e,i,t,o){"use strict";let h=globalThis.nodeRequire("node:events",!0).EventEmitter;function s(e){if("string"==typeof e&&(e=Buffer.from(e)),!Buffer.isBuffer(e))throw TypeError("The needle has to be a String or a Buffer.");let i=e.length;if(0===i)throw Error("The needle cannot be an empty String/Buffer.");if(i>256)throw Error("The needle cannot have a length bigger than 256.");this.maxMatches=1/0,this.matches=0,this._occ=Array(256).fill(i),this._lookbehind_size=0,this._needle=e,this._bufpos=0,this._lookbehind=Buffer.alloc(i);for(var t=0;t<i-1;++t)this._occ[e[t]]=i-1-t;}(0,globalThis.nodeRequire("node:util",!0).inherits)(s,h),s.prototype.reset=function(){this._lookbehind_size=0,this.matches=0,this._bufpos=0;},s.prototype.push=function(e,i){let t;Buffer.isBuffer(e)||(e=Buffer.from(e,"binary"));let o=e.length;for(this._bufpos=i||0;t!==o&&this.matches<this.maxMatches;)t=this._sbmh_feed(e);return t;},s.prototype._sbmh_feed=function(e){let i;let t=e.length,o=this._needle,h=o.length,s=o[h-1],n=-this._lookbehind_size;if(n<0){for(;n<0&&n<=t-h;){if((i=this._sbmh_lookup_char(e,n+h-1))===s&&this._sbmh_memcmp(e,n,h-1))return this._lookbehind_size=0,++this.matches,this.emit("info",!0),this._bufpos=n+h;n+=this._occ[i];}if(n<0)for(;n<0&&!this._sbmh_memcmp(e,n,t-n);)++n;if(n>=0)this.emit("info",!1,this._lookbehind,0,this._lookbehind_size),this._lookbehind_size=0;else{let i=this._lookbehind_size+n;return i>0&&this.emit("info",!1,this._lookbehind,0,i),this._lookbehind.copy(this._lookbehind,0,i,this._lookbehind_size-i),this._lookbehind_size-=i,e.copy(this._lookbehind,this._lookbehind_size),this._lookbehind_size+=t,this._bufpos=t,t;}}if(n+=(n>=0)*this._bufpos,-1!==e.indexOf(o,n))return n=e.indexOf(o,n),++this.matches,n>0?this.emit("info",!0,e,this._bufpos,n):this.emit("info",!0),this._bufpos=n+h;for(n=t-h;n<t&&(e[n]!==o[0]||0!==Buffer.compare(e.subarray(n,n+t-n),o.subarray(0,t-n)));)++n;return n<t&&(e.copy(this._lookbehind,0,n,n+(t-n)),this._lookbehind_size=t-n),n>0&&this.emit("info",!1,e,this._bufpos,n<t?n:t),this._bufpos=t,t;},s.prototype._sbmh_lookup_char=function(e,i){return i<0?this._lookbehind[this._lookbehind_size+i]:e[i];},s.prototype._sbmh_memcmp=function(e,i,t){for(var o=0;o<t;++o)if(this._sbmh_lookup_char(e,i+o)!==this._needle[o])return!1;return!0;},e.exports=s;},"e2c81440":function e(e,i,t,s){"use strict";let r=globalThis.nodeRequire("node:events",!0).EventEmitter,h=globalThis.nodeRequire("node:util",!0).inherits,a=t("43216912",!0),n=t("dc98b0e7",!0),d=Buffer.from("\r\n\r\n"),f=/\r\n/g,o=/^([^:]+):[ \t]?([\x00-\xFF]+)?$/;function u(e){r.call(this),e=e||{};let i=this;this.nread=0,this.maxed=!1,this.npairs=0,this.maxHeaderPairs=a(e,"maxHeaderPairs",2e3),this.maxHeaderSize=a(e,"maxHeaderSize",81920),this.buffer="",this.header={},this.finished=!1,this.ss=new n(d),this.ss.on("info",function(e,t,s,r){t&&!i.maxed&&(i.nread+r-s>=i.maxHeaderSize?(r=i.maxHeaderSize-i.nread+s,i.nread=i.maxHeaderSize,i.maxed=!0):i.nread+=r-s,i.buffer+=t.toString("binary",s,r)),e&&i._finish();});}h(u,r),u.prototype.push=function(e){let i=this.ss.push(e);if(this.finished)return i;},u.prototype.reset=function(){this.finished=!1,this.buffer="",this.header={},this.ss.reset();},u.prototype._finish=function(){this.buffer&&this._parseHeader(),this.ss.matches=this.ss.maxMatches;let e=this.header;this.header={},this.buffer="",this.finished=!0,this.nread=this.npairs=0,this.maxed=!1,this.emit("header",e);},u.prototype._parseHeader=function(){let e,i;if(this.npairs===this.maxHeaderPairs)return;let t=this.buffer.split(f),s=t.length;for(var r=0;r<s;++r){if(0===t[r].length)continue;if(("	"===t[r][0]||" "===t[r][0])&&i){this.header[i][this.header[i].length-1]+=t[r];continue;}let s=t[r].indexOf(":");if(-1===s||0===s)return;if(i=(e=o.exec(t[r]))[1].toLowerCase(),this.header[i]=this.header[i]||[],this.header[i].push(e[2]||""),++this.npairs===this.maxHeaderPairs)break;}},e.exports=u;},"e67ced7e":function e(e,t,s,n){"use strict";let r=new TextDecoder("utf-8"),c=new Map([["utf-8",r],["utf8",r]]),i={utf8:(e,t)=>0===e.length?"":("string"==typeof e&&(e=Buffer.from(e,t)),e.utf8Slice(0,e.length)),latin1:(e,t)=>0===e.length?"":"string"==typeof e?e:e.latin1Slice(0,e.length),utf16le:(e,t)=>0===e.length?"":("string"==typeof e&&(e=Buffer.from(e,t)),e.ucs2Slice(0,e.length)),base64:(e,t)=>0===e.length?"":("string"==typeof e&&(e=Buffer.from(e,t)),e.base64Slice(0,e.length)),other:(e,t)=>{if(0===e.length)return"";if("string"==typeof e&&(e=Buffer.from(e,t)),c.has(this.toString()))try{return c.get(this).decode(e);}catch{}return"string"==typeof e?e:e.toString();}};e.exports=function(e,t,s){return e?(function(e){let t;for(;;)switch(e){case"utf-8":case"utf8":return i.utf8;case"latin1":case"ascii":case"us-ascii":case"iso-8859-1":case"iso8859-1":case"iso88591":case"iso_8859-1":case"windows-1252":case"iso_8859-1:1987":case"cp1252":case"x-cp1252":return i.latin1;case"utf16le":case"utf-16le":case"ucs2":case"ucs-2":return i.utf16le;case"base64":return i.base64;default:if(void 0===t){t=!0,e=e.toLowerCase();continue;}return i.other.bind(e);}})(s)(e,t):e;};},"e90a9b6e":function t(t,n,e,r){"use strict";var i=this&&this.__awaiter||function(t,n,e,r){return new(e||(e=Promise))(function(i,o){function c(t){try{f(r.next(t));}catch(t){o(t);}}function u(t){try{f(r.throw(t));}catch(t){o(t);}}function f(t){var n;t.done?i(t.value):((n=t.value)instanceof e?n:new e(function(t){t(n);})).then(c,u);}f((r=r.apply(t,n||[])).next());});};Object.defineProperty(n,"__esModule",{value:!0}),n.chainInterceptors=void 0,n.chainInterceptors=function(...t){if(0===t.length)return;if(1===t.length)return t[0];let n=t[0];return(e,r,o)=>i(this,void 0,void 0,function*(){let i=o;for(let n=t.length-1;n>0;n--){let e;e=i,i=(r,i)=>t[n](r,i,e);}return n(e,r,i);});};},"ecd08c56":function e(e,t,s,a){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,s,a){void 0===a&&(a=s),Object.defineProperty(e,a,{enumerable:!0,get:function(){return t[s];}});}:function(e,t,s,a){void 0===a&&(a=s),e[a]=t[s];}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t});}:function(e,t){e.default=t;}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.hasOwnProperty.call(e,s)&&n(t,e,s);return i(t,e),t;},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e};};Object.defineProperty(t,"__esModule",{value:!0}),t.Path=void 0;let l=r(globalThis.nodeRequire("path")),u=r(s("c2d81037")),m=o(globalThis.nodeRequire("assert")),f="win32"===process.platform;t.Path=class{constructor(e){if(this.segments=[],"string"==typeof e){if(m.default(e,"Parameter 'itemPath' must not be empty"),e=u.safeTrimTrailingSeparator(e),u.hasRoot(e)){let t=e,s=u.dirname(t);for(;s!==t;){let e=l.basename(t);this.segments.unshift(e),t=s,s=u.dirname(t);}this.segments.unshift(t);}else this.segments=e.split(l.sep);}else{m.default(e.length>0,"Parameter 'itemPath' must not be an empty array");for(let t=0;t<e.length;t++){let s=e[t];m.default(s,"Parameter 'itemPath' must not contain any empty segments"),s=u.normalizeSeparators(e[t]),0===t&&u.hasRoot(s)?(s=u.safeTrimTrailingSeparator(s),m.default(s===u.dirname(s),"Parameter 'itemPath' root segment contains information for multiple segments")):m.default(!s.includes(l.sep),"Parameter 'itemPath' contains unexpected path separators"),this.segments.push(s);}}}toString(){let e=this.segments[0],t=e.endsWith(l.sep)||f&&/^[A-Z]:$/i.test(e);for(let s=1;s<this.segments.length;s++)t?t=!1:e+=l.sep,e+=this.segments[s];return e;}};},"eed9b987":function e(e,t,n,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n];}});}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n];}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t});}:function(e,t){e.default=t;}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&i(t,e,n);return o(t,e),t;},u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{l(r.next(e));}catch(e){o(e);}}function u(e){try{l(r.throw(e));}catch(e){o(e);}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t);})).then(a,u);}l((r=r.apply(e,t||[])).next());});},l=this&&this.__asyncValues||function(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this;},t);function r(n){t[n]=e[n]&&function(t){return new Promise(function(r,i){!function(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n});},t);}(r,i,(t=e[n](t)).done,t.value);});};}};Object.defineProperty(t,"__esModule",{value:!0}),t.hashFiles=void 0;let s=a(globalThis.nodeRequire("crypto")),c=a(n("29bf5eaf")),f=a(globalThis.nodeRequire("fs")),d=a(globalThis.nodeRequire("stream")),h=a(globalThis.nodeRequire("util")),y=a(globalThis.nodeRequire("path"));t.hashFiles=function(e,t,n=!1){var r,i,o;return u(this,void 0,void 0,function*(){let a=n?c.info:c.debug,u=!1,v=t||(null!==(o=process.env.GITHUB_WORKSPACE)&&void 0!==o?o:process.cwd()),b=s.createHash("sha256"),_=0;try{for(var p,m=l(e.globGenerator());!(p=yield m.next()).done;){let e=p.value;if(a(e),!e.startsWith(`${v}${y.sep}`)){a(`Ignore '${e}' since it is not under GITHUB_WORKSPACE.`);continue;}if(f.statSync(e).isDirectory()){a(`Skip directory '${e}'.`);continue;}let t=s.createHash("sha256"),n=h.promisify(d.pipeline);yield n(f.createReadStream(e),t),b.write(t.digest()),_++,u||(u=!0);}}catch(e){r={error:e};}finally{try{p&&!p.done&&(i=m.return)&&(yield i.call(m));}finally{if(r)throw r.error;}}return(b.end(),u)?(a(`Found ${_} files to hash.`),b.digest("hex")):(a("No matches found for glob"),"");});};},"f7c160d5":function e(e,t,r,i){"use strict";var o=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))(function(o,n){function s(e){try{a(i.next(e));}catch(e){n(e);}}function h(e){try{a(i.throw(e));}catch(e){n(e);}}function a(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t);})).then(s,h);}a((i=i.apply(e,t||[])).next());});};Object.defineProperty(t,"__esModule",{value:!0}),t.writeError=t.TwirpServer=void 0;let n=r("5bc3336c",!0),s=r("026b7588",!0),h=r("4796dc9d",!0);function a(e,t){let r=c(t);e.setHeader("Content-Type","application/json"),e.statusCode=h.httpStatusFromErrorCode(r.code),e.end(r.toJSON());}function c(e){return e instanceof h.TwirpError?e:new h.InternalServerErrorWith(e);}t.TwirpServer=class{constructor(e){this.pathPrefix="/twirp",this.hooks=[],this.interceptors=[],this.packageName=e.packageName,this.serviceName=e.serviceName,this.methodList=e.methodList,this.matchRoute=e.matchRoute,this.service=e.service;}get prefix(){return this.pathPrefix;}httpHandler(e){return(t,r)=>((null==e?void 0:e.prefix)!==void 0&&this.withPrefix(e.prefix),this._httpHandler(t,r));}use(...e){return e.forEach(e=>{if(n.isHook(e))return this.hooks.push(e),this;this.interceptors.push(e);}),this;}withPrefix(e){return!1===e?this.pathPrefix="":this.pathPrefix=e,this;}matchingPath(){let e=this.baseURI().replace(/\./g,"\\.");return RegExp(`${e}/(${this.methodList.join("|")})`);}baseURI(){return`${this.pathPrefix}/${this.packageName?this.packageName+".":""}${this.serviceName}`;}createContext(e,t){return{packageName:this.packageName,serviceName:this.serviceName,methodName:"",contentType:s.getContentType(e.headers["content-type"]),req:e,res:t};}_httpHandler(e,t){return o(this,void 0,void 0,function*(){let r=this.createContext(e,t);try{yield this.invokeHook("requestReceived",r);let{method:i,mimeContentType:o}=s.validateRequest(r,e,this.pathPrefix||""),n=this.matchRoute(i,{onMatch:e=>this.invokeHook("requestRouted",e),onNotFound:()=>{let t=`no handler for path ${e.url}`;throw new h.BadRouteError(t,e.method||"",e.url||"");}}),a=yield s.getRequestData(e),c=yield n(r,this.service,a,this.interceptors);yield Promise.all([this.invokeHook("responsePrepared",r),this.invokeHook("requestPrepared",r)]),t.statusCode=200,t.setHeader("Content-Type",o),t.end(c);}catch(e){yield this.invokeHook("error",r,c(e)),t.headersSent||a(t,e);}finally{yield Promise.all([this.invokeHook("responseSent",r),this.invokeHook("requestSent",r)]);}});}invokeHook(e,t,r){return o(this,void 0,void 0,function*(){if(0===this.hooks.length)return;let i=n.chainHooks(...this.hooks),o=null==i?void 0:i[e];o&&(yield o(t,r||new h.InternalServerError("internal server error")));});}},t.writeError=a;},"fc5787b7":function e(e,i,t,c){"use strict";var l;Object.defineProperty(i,"__esModule",{value:!0}),i.MatchKind=void 0,(l=i.MatchKind||(i.MatchKind={}))[l.None=0]="None",l[l.Directory=1]="Directory",l[l.File=2]="File",l[l.All=3]="All";},});